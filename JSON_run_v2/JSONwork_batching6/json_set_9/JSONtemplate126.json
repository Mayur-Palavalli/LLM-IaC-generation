{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation Template for Highly-Available RDS DBInstance with a Read Replica", "Resources": {"MyDBSubnetGroup": {"Type": "AWS::RDS::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnets for RDS DBInstance", "SubnetIds": [{"Ref": "SubnetA"}, {"Ref": "SubnetB"}]}}, "MyDBInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"AllocatedStorage": "20", "DBInstanceClass": "db.t3.micro", "Engine": "mysql", "MasterUsername": {"Ref": "DBUsername"}, "MasterUserPassword": {"Fn::Sub": "{{resolve:ssm:${DBPassword}}}"}, "VPCSecurityGroups": [{"Ref": "DBSecurityGroup"}], "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "MultiAZ": true, "PubliclyAccessible": false}}, "MyReadReplica": {"Type": "AWS::RDS::DBInstance", "Properties": {"SourceDBInstanceIdentifier": {"Ref": "MyDBInstance"}, "DBInstanceClass": "db.t3.micro", "PubliclyAccessible": false}}}, "Parameters": {"DBUsername": {"Type": "String", "Description": "Database master username"}, "DBPassword": {"Type": "String", "Description": "Password for the RDS DBInstance", "NoEcho": true}, "SubnetA": {"Type": "AWS::EC2::Subnet::Id", "Description": "Subnet ID for Availability Zone A"}, "SubnetB": {"Type": "AWS::EC2::Subnet::Id", "Description": "Subnet ID for Availability Zone B"}, "DBSecurityGroup": {"Type": "AWS::EC2::SecurityGroup::Id", "Description": "Security Group for the RDS DBInstance"}}, "Outputs": {"PrimaryDBInstanceEndpoint": {"Value": {"Fn::GetAtt": ["MyDBInstance", "Endpoint.Address"]}, "Description": "Endpoint address for the primary DB instance"}, "ReadReplicaEndpoint": {"Value": {"Fn::GetAtt": ["MyReadReplica", "Endpoint.Address"]}, "Description": "Endpoint address for the read replica"}}}