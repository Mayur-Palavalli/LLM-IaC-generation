{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"MyDBSubnetGroup": {"Type": "AWS::RDS::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for RDS DBInstance", "SubnetIds": ["subnet-xxxxxx", "subnet-yyyyyy"]}}, "MyDBSecurityGroup": {"Type": "AWS::EC2::SecurityGroup", "Properties": {"GroupDescription": "Security group for RDS instance", "VpcId": {"Ref": "MyVPC"}}}, "MyVPC": {"Type": "AWS::EC2::VPC", "Properties": {"CidrBlock": "10.0.0.0/16"}}, "MyDBInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"AllocatedStorage": "100", "DBInstanceClass": "db.t3.micro", "Engine": "mysql", "MasterUsername": "admin", "MasterUserPassword": {"Ref": "DBMasterUserPassword"}, "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "VPCSecurityGroups": [{"Fn::GetAtt": ["MyDBSecurityGroup", "GroupId"]}], "MultiAZ": true}}, "MyReadReplicaInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"SourceDBInstanceIdentifier": {"Ref": "MyDBInstance"}, "DBInstanceClass": "db.t3.micro", "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "VPCSecurityGroups": [{"Fn::GetAtt": ["MyDBSecurityGroup", "GroupId"]}]}}}, "Outputs": {"PrimaryDBInstance": {"Description": "Primary RDS DBInstance", "Value": {"Ref": "MyDBInstance"}}, "ReadReplicaInstance": {"Description": "Read Replica RDS DBInstance", "Value": {"Ref": "MyReadReplicaInstance"}}}, "Parameters": {"DBMasterUserPassword": {"NoEcho": true, "Description": "The password for the master database user", "Type": "String", "MinLength": 8, "MaxLength": 41, "AllowedPattern": "[a-zA-Z0-9]*", "ConstraintDescription": "must contain only alphanumeric characters."}}}