{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation Sample Template to create an Amazon EKS Cluster on EC2", "Resources": {"EKSClusterRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "eks.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Policies": [{"PolicyName": "eksClusterPolicy", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["ec2:Describe*", "ec2:AttachVolume", "ec2:DetachVolume", "ec2:ModifyVolume", "ec2:CreateSecurityGroup", "ec2:DeleteSecurityGroup", "ec2:AuthorizeSecurityGroupIngress", "ec2:RevokeSecurityGroupIngress", "ec2:AuthorizeSecurityGroupEgress", "ec2:RevokeSecurityGroupEgress", "eks:ListClusters", "eks:DescribeCluster"], "Resource": "*"}]}}]}}, "EKSCluster": {"Type": "AWS::EKS::Cluster", "Properties": {"Name": {"Ref": "ClusterName"}, "RoleArn": {"Fn::GetAtt": ["EKSClusterRole", "Arn"]}, "ResourcesVpcConfig": {"SecurityGroupIds": [{"Ref": "EKSSecurityGroup"}], "SubnetIds": [{"Ref": "Subnet1"}, {"Ref": "Subnet2"}]}}}, "EKSSecurityGroup": {"Type": "AWS::EC2::SecurityGroup", "Properties": {"GroupDescription": "EKS Security Group", "VpcId": {"Ref": "VPC"}}}}, "Parameters": {"ClusterName": {"Type": "String", "Description": "The name of the EKS Cluster", "Default": "MyEKSCluster"}, "Subnet1": {"Type": "AWS::EC2::Subnet::Id", "Description": "The ID of the first subnet in the VPC"}, "Subnet2": {"Type": "AWS::EC2::Subnet::Id", "Description": "The ID of the second subnet in the VPC"}, "VPC": {"Type": "AWS::EC2::VPC::Id", "Description": "The ID of the VPC"}}, "Outputs": {"ClusterNameOutput": {"Description": "The name of the EKS Cluster", "Value": {"Ref": "ClusterName"}}, "ClusterARN": {"Description": "The ARN of the EKS Cluster", "Value": {"Fn::GetAtt": ["EKSCluster", "Arn"]}}}}