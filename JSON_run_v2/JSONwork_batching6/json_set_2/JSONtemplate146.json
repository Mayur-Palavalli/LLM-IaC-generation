{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"S3Bucket": {"Type": "AWS::S3::Bucket", "Properties": {"BucketName": {"Ref": "BucketName"}, "AccessControl": "Private", "WebsiteConfiguration": {"IndexDocument": "index.html", "ErrorDocument": "error.html"}}}, "S3BucketPolicy": {"Type": "AWS::S3::BucketPolicy", "Properties": {"Bucket": {"Ref": "S3Bucket"}, "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": "*", "Action": "s3:GetObject", "Resource": {"Fn::Join": ["/", [{"Fn::GetAtt": ["S3Bucket", "Arn"]}, "*"]]}}]}}}, "CloudFrontOriginAccessIdentity": {"Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity", "Properties": {"CloudFrontOriginAccessIdentityConfig": {"Comment": "Origin Access Identity for S3 bucket"}}}, "CloudFrontDistribution": {"Type": "AWS::CloudFront::Distribution", "Properties": {"DistributionConfig": {"Enabled": true, "Origins": [{"Id": {"Fn::Sub": "${S3Bucket}-origin"}, "DomainName": {"Fn::GetAtt": ["S3Bucket", "RegionalDomainName"]}, "S3OriginConfig": {"OriginAccessIdentity": {"Fn::Sub": "origin-access-identity/cloudfront/${CloudFrontOriginAccessIdentity}"}}}], "DefaultCacheBehavior": {"TargetOriginId": {"Fn::Sub": "${S3Bucket}-origin"}, "ViewerProtocolPolicy": "redirect-to-https", "AllowedMethods": ["GET", "HEAD"], "CachedMethods": ["GET", "HEAD"], "ForwardedValues": {"QueryString": false, "Cookies": {"Forward": "none"}}, "MinTTL": 0, "DefaultTTL": 86400, "MaxTTL": 31536000}, "ViewerCertificate": {"CloudFrontDefaultCertificate": true}}}}}, "Parameters": {"BucketName": {"Type": "String", "Description": "The name of the S3 bucket for the static website.", "AllowedPattern": "^[a-z0-9.-]{3,63}$", "ConstraintDescription": "The bucket name must contain only lower case characters and numbers, periods (.) and hyphens (-), and be between 3 and 63 characters long."}}, "Outputs": {"WebsiteURL": {"Description": "URL for the static website hosted on S3", "Value": {"Fn::GetAtt": ["S3Bucket", "WebsiteURL"]}}, "CloudFrontURL": {"Description": "Domain name of the CloudFront distribution", "Value": {"Fn::GetAtt": ["CloudFrontDistribution", "DomainName"]}}}}