{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template to create an AD Connector and related resources.", "Parameters": {"DirectoryName": {"Type": "String", "Description": "The fully qualified name of the on-premises directory."}, "DnsIpAddresses": {"Type": "List<String>", "Description": "A list of IP addresses of DNS servers in the on-premises directory."}, "SubnetIds": {"Type": "List<AWS::EC2::Subnet::Id>", "Description": "The subnets for the AD Connector."}, "VpcId": {"Type": "AWS::EC2::VPC::Id", "Description": "The VPC ID where the AD Connector will be created."}}, "Resources": {"ADConnector": {"Type": "AWS::DirectoryService::MicrosoftAD", "Properties": {"Name": {"Ref": "DirectoryName"}, "VpcSettings": {"SubnetIds": {"Ref": "SubnetIds"}, "VpcId": {"Ref": "VpcId"}}, "DnsIpAddresses": {"Fn::Join": [",", {"Ref": "DnsIpAddresses"}]}, "Password": "ReplaceWithYourSecurePassword"}}, "DomainMembersSecurityGroup": {"Type": "AWS::EC2::SecurityGroup", "Properties": {"GroupDescription": "Security group for domain members allowing all PrivateIP communications inbound", "VpcId": {"Ref": "VpcId"}, "SecurityGroupIngress": [{"IpProtocol": "-1", "CidrIp": "0.0.0.0/0"}]}}, "DHCPOptionsSet": {"Type": "AWS::EC2::DHCPOptions", "Properties": {"DomainNameServers": {"Fn::Join": [",", {"Ref": "DnsIpAddresses"}]}}}, "DHCPOptionsAssociation": {"Type": "AWS::EC2::VPCDHCPOptionsAssociation", "Properties": {"VpcId": {"Ref": "VpcId"}, "DhcpOptionsId": {"Ref": "DHCPOptionsSet"}}}}}