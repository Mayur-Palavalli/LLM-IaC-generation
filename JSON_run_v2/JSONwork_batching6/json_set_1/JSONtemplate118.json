{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"MyChannel": {"Type": "AWS::IoTAnalytics::Channel", "Properties": {"ChannelName": "MyChannel", "RetentionPeriod": {"NumberOfDays": 14, "Unlimited": false}}}, "MyDatastore": {"Type": "AWS::IoTAnalytics::Datastore", "Properties": {"DatastoreName": "MyDatastore", "RetentionPeriod": {"NumberOfDays": 30, "Unlimited": false}}}, "MyPipeline": {"Type": "AWS::IoTAnalytics::Pipeline", "Properties": {"PipelineName": "MyPipeline", "PipelineActivities": [{"Channel": {"Name": "ChannelActivity", "ChannelName": {"Ref": "MyChannel"}, "Next": "SelectActivity"}}, {"SelectAttributes": {"Name": "SelectActivity", "Attributes": ["temperature", "humidity"], "Next": "DatastoreActivity"}}, {"Datastore": {"Name": "DatastoreActivity", "DatastoreName": {"Ref": "MyDatastore"}}}]}}, "MyDataset": {"Type": "AWS::IoTAnalytics::Dataset", "Properties": {"DatasetName": "MyDataset", "Actions": [{"ActionName": "SQLAction", "SqlQueryDatasetAction": {"SqlQuery": "SELECT temperature FROM MyDatastore WHERE temperature > 25", "Filters": []}}], "RetentionPeriod": {"NumberOfDays": 7, "Unlimited": false}}}}, "Outputs": {"ChannelName": {"Value": {"Ref": "MyChannel"}}, "DatastoreName": {"Value": {"Ref": "MyDatastore"}}, "PipelineName": {"Value": {"Ref": "MyPipeline"}}, "DatasetName": {"Value": {"Ref": "MyDataset"}}}}