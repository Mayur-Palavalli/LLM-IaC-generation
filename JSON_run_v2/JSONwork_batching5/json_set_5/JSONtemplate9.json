{"AWSTemplateFormatVersion": "2010-09-09", "Description": "Sample CloudFormation template to create an AWS App Runner Service from an existing ECR repository.", "Parameters": {"ServiceName": {"Type": "String", "Description": "The name of the App Runner service."}, "RepositoryUri": {"Type": "String", "Description": "The URI of the ECR repository."}, "ImageTag": {"Type": "String", "Description": "The image tag to use from the ECR repository."}, "Port": {"Type": "Number", "Description": "The port on which your service listens.", "Default": 80}}, "Resources": {"AppRunnerService": {"Type": "AWS::AppRunner::Service", "Properties": {"ServiceName": {"Ref": "ServiceName"}, "SourceConfiguration": {"ImageRepository": {"ImageRepositoryType": "ECR", "ImageIdentifier": {"Fn::Join": [":", [{"Ref": "RepositoryUri"}, {"Ref": "ImageTag"}]]}, "ImageConfiguration": {"Port": {"Fn::If": ["PortSpecified", {"Ref": "Port"}, "80"]}}}, "AutoDeploymentsEnabled": true}}}}, "Conditions": {"PortSpecified": {"Fn::Not": [{"Fn::Equals": [{"Ref": "Port"}, ""]}]}}, "Outputs": {"AppRunnerServiceArn": {"Description": "The ARN of the App Runner service.", "Value": {"Fn::GetAtt": ["AppRunnerService", "ServiceArn"]}}, "AppRunnerServiceUrl": {"Description": "The URL of the App Runner service.", "Value": {"Fn::GetAtt": ["AppRunnerService", "ServiceUrl"]}}}}