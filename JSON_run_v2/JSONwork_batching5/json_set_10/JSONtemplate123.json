{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"NeptuneSubnetGroup": {"Type": "AWS::Neptune::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for Neptune DB", "SubnetIds": ["subnet-xxxxxx", "subnet-yyyyyy"]}}, "NeptuneDBCluster": {"Type": "AWS::Neptune::DBCluster", "Properties": {"DBSubnetGroupName": {"Ref": "NeptuneSubnetGroup"}, "BackupRetentionPeriod": 1, "PreferredBackupWindow": "07:00-09:00", "PreferredMaintenanceWindow": "sun:05:00-sun:06:00", "VpcSecurityGroupIds": ["sg-zzzzzz"], "StorageEncrypted": true, "DBClusterParameterGroupName": {"Ref": "NeptuneDBClusterParameterGroup"}}}, "NeptuneDBInstance": {"Type": "AWS::Neptune::DBInstance", "Properties": {"DBInstanceClass": "db.r5.large", "DBClusterIdentifier": {"Ref": "NeptuneDBCluster"}}}, "NeptuneDBClusterParameterGroup": {"Type": "AWS::Neptune::DBClusterParameterGroup", "Properties": {"Description": "Neptune Cluster Parameter Group", "Family": "neptune1", "Parameters": {"neptune_enable_audit_log": "1"}}}, "CloudWatchAlarm": {"Type": "AWS::CloudWatch::Alarm", "Properties": {"AlarmName": "NeptuneDBClusterHighCPU", "AlarmDescription": "Alarm if CPU utilization exceeds 80%", "MetricName": "CPUUtilization", "Namespace": "AWS/Neptune", "Statistic": "Average", "Period": 300, "EvaluationPeriods": 1, "Threshold": 80, "ComparisonOperator": "GreaterThanThreshold", "Dimensions": [{"Name": "DBClusterIdentifier", "Value": {"Fn::GetAtt": ["NeptuneDBCluster", "DBClusterIdentifier"]}}], "AlarmActions": [{"Ref": "SNSTopic"}]}}, "SNSTopic": {"Type": "AWS::SNS::Topic", "Properties": {"Subscription": [{"Endpoint": "example@example.com", "Protocol": "email"}]}}}, "Outputs": {"NeptuneDBClusterEndpoint": {"Value": {"Fn::GetAtt": ["NeptuneDBCluster", "Endpoint"]}, "Description": "Endpoint for Neptune DB Cluster"}, "NeptuneReaderEndpoint": {"Value": {"Fn::GetAtt": ["NeptuneDBCluster", "ReadEndpoint"]}, "Description": "Reader endpoint for Neptune DB Cluster"}}}