{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"MyGreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"InitialVersion": {"GroupVersion": {"CoreDefinitionVersionArn": {"Ref": "MyCoreDefinitionVersionArn"}, "DeviceDefinitionVersionArn": {"Ref": "MyDeviceDefinitionVersionArn"}, "FunctionDefinitionVersionArn": {"Ref": "MyFunctionDefinitionVersionArn"}, "ResourceDefinitionVersionArn": {"Ref": "MyResourceDefinitionVersionArn"}}}, "Name": "MyGreengrassGroup"}}, "MyCoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "MyCoreDefinition", "InitialVersion": {"Cores": [{"Id": "MyCore", "CertificateArn": {"Ref": "MyCoreCertificateArn"}, "SyncShadow": true, "ThingArn": {"Ref": "MyCoreThingArn"}}]}}}, "MyDeviceDefinition": {"Type": "AWS::Greengrass::DeviceDefinition", "Properties": {"Name": "MyDeviceDefinition", "InitialVersion": {"Devices": [{"Id": "MyDevice", "CertificateArn": {"Ref": "MyDeviceCertificateArn"}, "SyncShadow": true, "ThingArn": {"Ref": "MyDeviceThingArn"}}]}}}, "MyFunctionDefinition": {"Type": "AWS::Greengrass::FunctionDefinition", "Properties": {"Name": "MyFunctionDefinition", "InitialVersion": {"Functions": [{"Id": "MyFunction", "FunctionArn": {"Fn::GetAtt": ["MyLambdaFunction", "Arn"]}, "FunctionConfiguration": {"Executable": "arn:aws:lambda:::function:MyFunction", "MemorySize": 128000, "Pinned": true, "Timeout": 3}}]}}}, "MyResourceDefinition": {"Type": "AWS::Greengrass::ResourceDefinition", "Properties": {"Name": "MyResourceDefinition", "InitialVersion": {"Resources": [{"Id": "MyResource", "Name": "MyLocalVolumeResource", "ResourceDataContainer": {"LocalVolumeResourceData": {"SourcePath": "/local/path", "DestinationPath": "/destination/path", "GroupOwnerSetting": {"AutoAddGroupOwner": true}}}}]}}}, "MyLambdaFunction": {"Type": "AWS::Lambda::Function", "Properties": {"Handler": "index.handler", "Role": {"Fn::GetAtt": ["MyLambdaExecutionRole", "Arn"]}, "Code": {"S3Bucket": "my-s3-bucket", "S3Key": "my-lambda-function.zip"}, "Runtime": "python3.8"}}, "MyLambdaExecutionRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "lambda.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Policies": [{"PolicyName": "MyLambdaPolicy", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["logs:CreateLogGroup", "logs:CreateLogStream", "logs:PutLogEvents"], "Resource": "*"}]}}]}}}, "Outputs": {"GreengrassGroupArn": {"Value": {"Fn::GetAtt": ["MyGreengrassGroup", "Arn"]}}}}