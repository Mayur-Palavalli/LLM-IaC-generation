{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"GreengrassCoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "MyGreengrassCoreDefinition", "InitialVersion": {"Cores": [{"Id": "MyGreengrassCore", "CertificateArn": {"Ref": "GreengrassCoreCertificateArn"}, "ThingArn": {"Ref": "GreengrassCoreThingArn"}, "SyncShadow": true}]}}}, "GreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"Name": "MyGreengrassGroup", "InitialVersion": {"CoreDefinitionVersionArn": {"Ref": "GreengrassCoreDefinitionVersionArn"}}}}, "GreengrassCoreThing": {"Type": "AWS::IoT::Thing", "Properties": {"ThingName": "MyGreengrassCoreThing"}}, "GreengrassCoreCertificate": {"Type": "AWS::IoT::Certificate", "Properties": {"Status": "ACTIVE"}}, "GreengrassCorePolicy": {"Type": "AWS::IoT::Policy", "Properties": {"PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["iot:*", "greengrass:*"], "Resource": "*"}]}}}, "GreengrassCorePolicyPrincipalAttachment": {"Type": "AWS::IoT::PolicyPrincipalAttachment", "Properties": {"PolicyName": {"Ref": "GreengrassCorePolicy"}, "Principal": {"Ref": "GreengrassCoreCertificate"}}}, "GreengrassCoreThingPrincipalAttachment": {"Type": "AWS::IoT::ThingPrincipalAttachment", "Properties": {"ThingName": {"Ref": "GreengrassCoreThing"}, "Principal": {"Ref": "GreengrassCoreCertificate"}}}}, "Outputs": {"GreengrassGroupId": {"Description": "Id of the Greengrass Group", "Value": {"Ref": "GreengrassGroup"}}, "GreengrassCoreDefinitionArn": {"Description": "Arn of the Greengrass Core Definition", "Value": {"Ref": "GreengrassCoreDefinition"}}, "GreengrassCoreCertificateArn": {"Description": "Arn of the Greengrass Core Certificate", "Value": {"Ref": "GreengrassCoreCertificate"}}, "GreengrassCoreThingArn": {"Description": "Arn of the Greengrass Core Thing", "Value": {"Ref": "GreengrassCoreThing"}}}}