{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"TableDefinitions": {"Type": "Custom::TableDefinitions", "Properties": {"ServiceToken": "arn:aws:lambda:region:account-id:function:name", "Tables": [{"TableName": "Table1", "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}, {"TableName": "Table2", "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}, {"TableName": "Table3", "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}]}}, "DynamoDBTables": {"Type": "AWS::CloudFormation::CustomResource", "Properties": {"ServiceToken": {"Fn::GetAtt": ["TableDefinitions", "Arn"]}, "TableDefinitions": {"Fn::ForEach": {"Key": "Tables", "Items": {"Fn::GetAtt": ["TableDefinitions", "Tables"]}, "Fn::Sub": [{"Resources": {"${TableName}DynamoDBTable": {"Type": "AWS::DynamoDB::Table", "Properties": {"TableName": "${TableName}", "AttributeDefinitions": "${AttributeDefinitions}", "KeySchema": "${KeySchema}", "ProvisionedThroughput": "${ProvisionedThroughput}"}}}}, "${Tables}"]}}}}}}