{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation Template to create a static website with S3 and CloudFront, including necessary configurations for compliance.", "Resources": {"S3Bucket": {"Type": "AWS::S3::Bucket", "Properties": {"BucketName": {"Fn::Sub": "${AWS::StackName}-static-website-bucket"}, "VersioningConfiguration": {"Status": "Enabled"}, "PublicAccessBlockConfiguration": {"BlockPublicAcls": true, "IgnorePublicAcls": true, "BlockPublicPolicy": true, "RestrictPublicBuckets": true}}}, "BucketPolicy": {"Type": "AWS::S3::BucketPolicy", "Properties": {"Bucket": {"Ref": "S3Bucket"}, "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Sid": "PublicReadGetObject", "Effect": "Allow", "Principal": "*", "Action": "s3:GetObject", "Resource": {"Fn::Join": ["", ["arn:aws:s3:::", {"Ref": "S3Bucket"}, "/*"]]}, "Condition": {"IpAddress": {"aws:SourceIp": "0.0.0.0/0"}}}]}}}, "CloudFrontOriginAccessIdentity": {"Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity", "Properties": {"CloudFrontOriginAccessIdentityConfig": {"Comment": {"Fn::Sub": "${AWS::StackName} OAI"}}}}, "CloudFrontDistribution": {"Type": "AWS::CloudFront::Distribution", "Properties": {"DistributionConfig": {"Origins": [{"Id": {"Fn::Sub": "${S3Bucket}-origin"}, "DomainName": {"Fn::GetAtt": ["S3Bucket", "RegionalDomainName"]}, "S3OriginConfig": {"OriginAccessIdentity": {"Fn::Sub": "origin-access-identity/cloudfront/${CloudFrontOriginAccessIdentity}"}}}], "Enabled": true, "DefaultCacheBehavior": {"TargetOriginId": {"Fn::Sub": "${S3Bucket}-origin"}, "ViewerProtocolPolicy": "redirect-to-https", "AllowedMethods": ["GET", "HEAD"], "CachedMethods": ["GET", "HEAD"], "ForwardedValues": {"QueryString": false, "Cookies": {"Forward": "none"}}}, "ViewerCertificate": {"CloudFrontDefaultCertificate": true, "MinimumProtocolVersion": "TLSv1.2_2021"}}}}}, "Outputs": {"S3BucketName": {"Description": "Name of the S3 bucket hosting the static website", "Value": {"Ref": "S3Bucket"}}, "CloudFrontDistributionDomainName": {"Description": "Domain name of the CloudFront distribution", "Value": {"Fn::GetAtt": ["CloudFrontDistribution", "DomainName"]}}}}