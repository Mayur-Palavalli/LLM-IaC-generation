{"AWSTemplateFormatVersion": "2010-09-09", "Description": "CloudFormation template to create a static website using S3 and CloudFront", "Resources": {"S3Bucket": {"Type": "AWS::S3::Bucket", "Properties": {"BucketName": {"Fn::Join": ["-", ["static-website", {"Ref": "AWS::AccountId"}, {"Ref": "AWS::Region"}]]}, "AccessControl": "PublicRead", "WebsiteConfiguration": {"IndexDocument": "index.html", "ErrorDocument": "error.html"}, "BucketEncryption": {"ServerSideEncryptionConfiguration": [{"ServerSideEncryptionByDefault": {"SSEAlgorithm": "AES256"}}]}, "OwnershipControls": {"Rules": [{"ObjectOwnership": "BucketOwnerPreferred"}]}}}, "S3BucketPolicy": {"Type": "AWS::S3::BucketPolicy", "Properties": {"Bucket": {"Ref": "S3Bucket"}, "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": "*", "Action": ["s3:GetObject"], "Resource": {"Fn::Join": ["", ["arn:aws:s3:::", {"Ref": "S3Bucket"}, "/*"]]}}]}}}, "CloudFrontDistribution": {"Type": "AWS::CloudFront::Distribution", "Properties": {"DistributionConfig": {"Origins": [{"DomainName": {"Fn::GetAtt": ["S3Bucket", "WebsiteURL"]}, "Id": {"Ref": "S3Bucket"}, "CustomOriginConfig": {"HTTPPort": 80, "HTTPSPort": 443, "OriginProtocolPolicy": "http-only"}}], "Enabled": true, "DefaultCacheBehavior": {"TargetOriginId": {"Ref": "S3Bucket"}, "ViewerProtocolPolicy": "redirect-to-https", "AllowedMethods": ["GET", "HEAD"], "CachedMethods": ["GET", "HEAD"], "ForwardedValues": {"QueryString": false, "Cookies": {"Forward": "none"}}}, "PriceClass": "PriceClass_All", "ViewerCertificate": {"CloudFrontDefaultCertificate": true}}}}}, "Outputs": {"S3BucketName": {"Description": "Name of the S3 bucket hosting the website", "Value": {"Ref": "S3Bucket"}}, "CloudFrontDomainName": {"Description": "Domain name of the CloudFront distribution", "Value": {"Fn::GetAtt": ["CloudFrontDistribution", "DomainName"]}}}}