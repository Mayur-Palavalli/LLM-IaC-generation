{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation Template to create an AWS App Runner Service from an existing ECR Repository.", "Resources": {"AppRunnerECRServiceRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "apprunner.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Path": "/", "Policies": [{"PolicyName": "AppRunnerECRPolicy", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["ecr:GetDownloadUrlForLayer", "ecr:BatchGetImage", "ecr:BatchCheckLayerAvailability", "ecr:GetAuthorizationToken"], "Resource": "*"}]}}]}}, "AppRunnerService": {"Type": "AWS::AppRunner::Service", "Properties": {"SourceConfiguration": {"AuthenticationConfiguration": {"AccessRoleArn": {"Fn::GetAtt": ["AppRunnerECRServiceRole", "Arn"]}}, "ImageRepository": {"ImageRepositoryType": "ECR", "ImageIdentifier": "123456789012.dkr.ecr.us-west-2.amazonaws.com/example-repo", "ImageConfiguration": {"Port": "8000"}}}, "InstanceConfiguration": {"Cpu": "1024", "Memory": "2048"}, "ServiceName": "AppRunnerService", "HealthCheckConfiguration": {"Path": "/", "Protocol": "HTTP", "Interval": 10, "Timeout": 5, "HealthyThreshold": 1, "UnhealthyThreshold": 5}}}}, "Outputs": {"ServiceUrl": {"Description": "URL of the App Runner service.", "Value": {"Fn::GetAtt": ["AppRunnerService", "ServiceUrl"]}}, "ServiceArn": {"Description": "ARN of the App Runner service.", "Value": {"Ref": "AppRunnerService"}}}}