{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template to provision AWS Neptune Graph Database with CI/CD, CloudWatch, and SNS integration.", "Resources": {"NeptuneDBCluster": {"Type": "AWS::Neptune::DBCluster", "Properties": {"BackupRetentionPeriod": 7, "DBClusterIdentifier": "my-neptune-cluster", "Port": 8182, "PreferredBackupWindow": "07:00-09:00", "PreferredMaintenanceWindow": "sun:05:00-sun:09:00", "Engine": "neptune"}}, "NeptuneDBInstance": {"Type": "AWS::Neptune::DBInstance", "Properties": {"DBInstanceClass": "db.r5.large", "DBClusterIdentifier": {"Ref": "NeptuneDBCluster"}, "DBInstanceIdentifier": "my-neptune-instance"}}, "NeptuneDBClusterParameterGroup": {"Type": "AWS::Neptune::DBClusterParameterGroup", "Properties": {"Description": "Cluster parameter group for Neptune", "Family": "neptune1", "Parameters": {"neptune_enable_audit_log": "1"}}}, "NeptuneDBParameterGroup": {"Type": "AWS::Neptune::DBParameterGroup", "Properties": {"Description": "Parameter group for Neptune", "Family": "neptune1", "Parameters": {"neptune_query_timeout": "20000"}}}, "CloudWatchLogsGroup": {"Type": "AWS::Logs::LogGroup", "Properties": {"LogGroupName": "/aws/neptune/logs", "RetentionInDays": 30}}, "SNSTopic": {"Type": "AWS::SNS::Topic", "Properties": {"TopicName": "NeptuneAlertsTopic"}}, "CloudWatchAlarmCPUUtilization": {"Type": "AWS::CloudWatch::Alarm", "Properties": {"AlarmName": "NeptuneCPUUtilization", "AlarmDescription": "Alarm when CPU exceeds 80%", "MetricName": "CPUUtilization", "Namespace": "AWS/Neptune", "Statistic": "Average", "Period": 300, "EvaluationPeriods": 1, "Threshold": 80, "ComparisonOperator": "GreaterThanThreshold", "Dimensions": [{"Name": "DBInstanceIdentifier", "Value": {"Ref": "NeptuneDBInstance"}}], "AlarmActions": [{"Ref": "SNSTopic"}]}}}, "Outputs": {"DBClusterEndpoint": {"Description": "Endpoint address of the Neptune DB Cluster", "Value": {"Fn::GetAtt": ["NeptuneDBCluster", "Endpoint"]}}, "DBInstanceEndpoint": {"Description": "Endpoint address of the Neptune DB Instance", "Value": {"Fn::GetAtt": ["NeptuneDBInstance", "Endpoint"]}}, "SNSTopicArn": {"Description": "ARN of the SNS Topic", "Value": {"Ref": "SNSTopic"}}}}