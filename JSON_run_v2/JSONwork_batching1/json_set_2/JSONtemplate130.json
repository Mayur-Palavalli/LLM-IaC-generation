{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"MyDBInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"DBInstanceClass": "db.t3.small", "AllocatedStorage": "20", "DBName": "MyDatabase", "Engine": "mysql", "EngineVersion": "8.0.36", "MasterUsername": "admin", "MasterUserPassword": {"Ref": "DBPassword"}, "MultiAZ": true, "VPCSecurityGroups": [{"Ref": "RDSVPCSecurityGroup"}], "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "BackupRetentionPeriod": 7, "DeleteAutomatedBackups": true}}, "MyDBInstanceReadReplica": {"Type": "AWS::RDS::DBInstance", "Properties": {"SourceDBInstanceIdentifier": {"Ref": "MyDBInstance"}, "DBInstanceClass": "db.t3.small", "Engine": "mysql"}}, "RDSVPCSecurityGroup": {"Type": "AWS::EC2::SecurityGroup", "Properties": {"GroupDescription": "RDS security group", "VpcId": {"Ref": "VPC"}, "SecurityGroupIngress": [{"IpProtocol": "tcp", "FromPort": 3306, "ToPort": 3306, "CidrIp": "0.0.0.0/0"}]}}, "MyDBSubnetGroup": {"Type": "AWS::RDS::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for RDS instance", "SubnetIds": [{"Ref": "Subnet1"}, {"Ref": "Subnet2"}]}}}, "Parameters": {"VPC": {"Type": "AWS::EC2::VPC::Id", "Description": "The VPC ID"}, "Subnet1": {"Type": "AWS::EC2::Subnet::Id", "Description": "The ID of the first subnet"}, "Subnet2": {"Type": "AWS::EC2::Subnet::Id", "Description": "The ID of the second subnet"}, "DBPassword": {"Type": "String", "NoEcho": true, "Description": "The database admin account password"}}, "Outputs": {"PrimaryDBInstanceEndpoint": {"Description": "The connection endpoint for the primary DB instance", "Value": {"Fn::GetAtt": ["MyDBInstance", "Endpoint.Address"]}}, "ReadReplicaDBInstanceEndpoint": {"Description": "The connection endpoint for the read replica DB instance", "Value": {"Fn::GetAtt": ["MyDBInstanceReadReplica", "Endpoint.Address"]}}}}