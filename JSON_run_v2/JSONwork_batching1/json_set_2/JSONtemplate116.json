{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"IoTAnalyticsChannel": {"Type": "AWS::IoTAnalytics::Channel", "Properties": {"ChannelName": "MyChannel"}}, "IoTAnalyticsDatastore": {"Type": "AWS::IoTAnalytics::Datastore", "Properties": {"DatastoreName": "MyDatastore"}}, "IoTAnalyticsPipeline": {"Type": "AWS::IoTAnalytics::Pipeline", "Properties": {"PipelineName": "MyPipeline", "PipelineActivities": [{"Channel": {"ChannelName": {"Ref": "IoTAnalyticsChannel"}, "Name": "MyChannelActivity", "Next": "MyDatastoreActivity"}}, {"Datastore": {"DatastoreName": {"Ref": "IoTAnalyticsDatastore"}, "Name": "MyDatastoreActivity"}}]}}, "IoTAnalyticsDataset": {"Type": "AWS::IoTAnalytics::Dataset", "Properties": {"DatasetName": "MyDataset", "Actions": [{"ActionName": "SQLQueryAction", "QueryAction": {"SqlQuery": "SELECT * FROM MyDatastore"}}], "Triggers": [{"Schedule": {"ScheduleExpression": "rate(1 hour)"}}]}}}}