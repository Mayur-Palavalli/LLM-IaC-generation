{"AWSTemplateFormatVersion": "2010-09-09", "Description": "Highly-Available RDS DBInstance with a read replica", "Resources": {"MyDBSubnetGroup": {"Type": "AWS::RDS::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for RDS instance", "SubnetIds": ["subnet-abc123", "subnet-def456"]}}, "MySecurityGroup": {"Type": "AWS::EC2::SecurityGroup", "Properties": {"GroupDescription": "Security group for RDS instance", "VpcId": {"Ref": "MyVPC"}}}, "MyVPC": {"Type": "AWS::EC2::VPC", "Properties": {"CidrBlock": "10.0.0.0/16"}}, "MyRDSInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"AllocatedStorage": "20", "DBInstanceClass": "db.t3.micro", "Engine": "mysql", "MasterUsername": "admin", "MasterUserPassword": {"Fn::Sub": "${MyRDSMasterPassword}"}, "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "VPCSecurityGroups": [{"Fn::GetAtt": ["MySecurityGroup", "GroupId"]}], "MultiAZ": true, "StorageType": "gp2"}, "DeletionPolicy": "Snapshot"}, "MyReadReplica": {"Type": "AWS::RDS::DBInstance", "Properties": {"SourceDBInstanceIdentifier": {"Ref": "MyRDSInstance"}, "DBInstanceClass": "db.t3.micro", "Engine": "mysql", "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "VPCSecurityGroups": [{"Fn::GetAtt": ["MySecurityGroup", "GroupId"]}], "StorageType": "gp2"}, "DeletionPolicy": "Snapshot"}}, "Parameters": {"MyRDSMasterPassword": {"Type": "String", "NoEcho": true, "Description": "The master password for the RDS instance"}}, "Outputs": {"PrimaryDBInstanceEndpoint": {"Description": "Endpoint of the primary RDS instance", "Value": {"Fn::GetAtt": ["MyRDSInstance", "Endpoint.Address"]}}, "ReadReplicaEndpoint": {"Description": "Endpoint of the read replica RDS instance", "Value": {"Fn::GetAtt": ["MyReadReplica", "Endpoint.Address"]}}}}