{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"GreengrassServiceRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "greengrass.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Policies": [{"PolicyName": "GreengrassServiceRolePolicy", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["iot:*", "logs:*", "greengrass:*", "s3:*"], "Resource": "*"}]}}]}}, "IoTPolicy": {"Type": "AWS::IoT::Policy", "Properties": {"PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["iot:Connect", "iot:Publish", "iot:Subscribe", "iot:Receive"], "Resource": "*"}]}, "PolicyName": "GreengrassIoTPolicy"}}, "GreengrassCoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "GreengrassCoreDefinition", "InitialVersion": {"Cores": [{"Id": "GreengrassCore", "CertificateArn": "arn:aws:iot:region:account-id:cert/your-certificate-id", "ThingArn": "arn:aws:iot:region:account-id:thing/your-thing-name"}]}}}, "GreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"Name": "GreengrassGroup", "InitialVersion": {"CoreDefinitionVersionArn": {"Ref": "GreengrassCoreDefinition"}, "FunctionDefinitionVersionArn": {"Ref": "GreengrassFunctionDefinition"}}}}, "GreengrassFunctionDefinition": {"Type": "AWS::Greengrass::FunctionDefinition", "Properties": {"Name": "GreengrassFunctionDefinition", "InitialVersion": {"Functions": [{"Id": "GreengrassFunction", "FunctionArn": "arn:aws:lambda:region:account-id:function:your-function-name", "FunctionConfiguration": {"MemorySize": 128000, "Timeout": 25, "Pinned": false, "Executable": "lambda_function.lambda_handler", "Environment": {"Variables": {}, "Execution": {"IsolationMode": "GreengrassContainer"}}}}]}}}}}