{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"IoTAnalyticsChannel": {"Type": "AWS::IoTAnalytics::Channel", "Properties": {"ChannelName": "MyIoTAnalyticsChannel", "RetentionPeriod": {"Unlimited": true}}}, "IoTAnalyticsDatastore": {"Type": "AWS::IoTAnalytics::Datastore", "Properties": {"DatastoreName": "MyIoTAnalyticsDatastore", "RetentionPeriod": {"Unlimited": true}}}, "IoTAnalyticsPipeline": {"Type": "AWS::IoTAnalytics::Pipeline", "Properties": {"PipelineName": "MyIoTAnalyticsPipeline", "PipelineActivities": [{"Channel": {"Name": "ChannelActivity", "ChannelName": {"Ref": "IoTAnalyticsChannel"}, "Next": "FilterActivity"}}, {"Filter": {"Name": "FilterActivity", "Filter": "temperature > 25", "Next": "SelectAttributesActivity"}}, {"SelectAttributes": {"Name": "SelectAttributesActivity", "Attributes": ["temperature", "humidity"], "Next": "DatastoreActivity"}}, {"Datastore": {"Name": "DatastoreActivity", "DatastoreName": {"Ref": "IoTAnalyticsDatastore"}}}]}}, "IoTAnalyticsDataset": {"Type": "AWS::IoTAnalytics::Dataset", "Properties": {"DatasetName": "MyIoTAnalyticsDataset", "Actions": [{"ActionName": "SQLQueryAction", "QueryAction": {"SqlQuery": "SELECT temperature, humidity FROM \"MyIoTAnalyticsDatastore\" WHERE temperature > 25"}}], "Triggers": [{"Schedule": {"ScheduleExpression": "cron(0 * * * ? *)"}}]}}}}