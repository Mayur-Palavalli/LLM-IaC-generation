{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"GGRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "greengrass.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Policies": [{"PolicyName": "GreengrassBasicExecution", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["logs:CreateLogGroup", "logs:CreateLogStream", "logs:PutLogEvents", "iot:*", "greengrass:*"], "Resource": "*"}]}}]}}, "CoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "MyCoreDefinition", "InitialVersion": {"Cores": [{"Id": "MyCore", "CertificateArn": "<Replace-With-Your-CertificateArn>", "ThingArn": "<Replace-With-Your-ThingArn>", "SyncShadow": true}]}}}, "FunctionDefinition": {"Type": "AWS::Greengrass::FunctionDefinition", "Properties": {"Name": "MyFunctionDefinition", "InitialVersion": {"Functions": [{"Id": "MyFunction", "FunctionArn": "<Replace-With-Your-LambdaFunctionArn>", "FunctionConfiguration": {"EncodingType": "json", "Environment": {"Variables": {"ExampleVariable": "ExampleValue"}}, "MemorySize": 128000, "Pinned": true, "Timeout": 25}}]}}}, "ResourceDefinition": {"Type": "AWS::Greengrass::ResourceDefinition", "Properties": {"Name": "MyResourceDefinition", "InitialVersion": {"Resources": [{"Id": "MyResource", "Name": "ExampleResource", "ResourceDataContainer": {"LocalDeviceResourceData": {"SourcePath": "/dev/sda1", "GroupOwnerSetting": {"AutoAddGroupOwner": true}}}}]}}}, "SubscriptionDefinition": {"Type": "AWS::Greengrass::SubscriptionDefinition", "Properties": {"Name": "MySubscriptionDefinition", "InitialVersion": {"Subscriptions": [{"Id": "MySubscription", "Source": "<Replace-With-Your-Source>", "Subject": "example/topic", "Target": "<Replace-With-Your-Target>"}]}}}, "DeviceDefinition": {"Type": "AWS::Greengrass::DeviceDefinition", "Properties": {"Name": "MyDeviceDefinition", "InitialVersion": {"Devices": [{"Id": "MyDevice", "CertificateArn": "<Replace-With-Your-DeviceCertificateArn>", "SyncShadow": true, "ThingArn": "<Replace-With-Your-DeviceThingArn>"}]}}}, "LoggerDefinition": {"Type": "AWS::Greengrass::LoggerDefinition", "Properties": {"Name": "MyLoggerDefinition", "InitialVersion": {"Loggers": [{"Id": "MyLogger", "Component": "GreengrassSystem", "Level": "INFO", "Space": 1024, "Type": "FileSystem"}]}}}, "GreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"Name": "MyGreengrassGroup", "InitialVersion": {"CoreDefinitionVersionArn": {"Ref": "CoreDefinition"}, "FunctionDefinitionVersionArn": {"Ref": "FunctionDefinition"}, "ResourceDefinitionVersionArn": {"Ref": "ResourceDefinition"}, "SubscriptionDefinitionVersionArn": {"Ref": "SubscriptionDefinition"}, "DeviceDefinitionVersionArn": {"Ref": "DeviceDefinition"}, "LoggerDefinitionVersionArn": {"Ref": "LoggerDefinition"}}}}}}