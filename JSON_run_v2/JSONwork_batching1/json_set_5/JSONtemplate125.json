{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"NeptuneDBCluster": {"Type": "AWS::Neptune::DBCluster", "Properties": {"AvailabilityZones": ["us-west-2a", "us-west-2b", "us-west-2c"], "BackupRetentionPeriod": 1, "DBClusterIdentifier": "my-neptune-cluster", "DBSubnetGroupName": {"Ref": "NeptuneDBSubnetGroup"}, "StorageEncrypted": true}}, "NeptuneInstance": {"Type": "AWS::Neptune::DBInstance", "Properties": {"DBInstanceClass": "db.r5.large", "DBClusterIdentifier": {"Ref": "NeptuneDBCluster"}}}, "NeptuneDBSubnetGroup": {"Type": "AWS::Neptune::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for Neptune cluster", "SubnetIds": ["subnet-0123456789abcdef0", "subnet-abcdef0123456789"]}}, "CloudWatchLogGroup": {"Type": "AWS::Logs::LogGroup", "Properties": {"LogGroupName": "/aws/neptune/logs", "RetentionInDays": 7}}, "SNSAlertTopic": {"Type": "AWS::SNS::Topic", "Properties": {"TopicName": "NeptuneAlerts"}}, "SNSTopicPolicy": {"Type": "AWS::SNS::TopicPolicy", "Properties": {"PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "cloudwatch.amazonaws.com"}, "Action": "SNS:Publish", "Resource": {"Ref": "SNSAlertTopic"}}]}, "Topics": [{"Ref": "SNSAlertTopic"}]}}, "CloudWatchAlarm": {"Type": "AWS::CloudWatch::Alarm", "Properties": {"AlarmName": "NeptuneCPUUtilizationAlarm", "AlarmDescription": "Alarm for Neptune CPU Utilization", "MetricName": "CPUUtilization", "Namespace": "AWS/Neptune", "Statistic": "Average", "Period": 300, "EvaluationPeriods": 1, "Threshold": 80, "ComparisonOperator": "GreaterThanThreshold", "Dimensions": [{"Name": "DBClusterIdentifier", "Value": {"Ref": "NeptuneDBCluster"}}], "AlarmActions": [{"Ref": "SNSAlertTopic"}]}}}, "Outputs": {"NeptuneClusterEndpoint": {"Description": "The endpoint address of the Neptune cluster", "Value": {"Fn::GetAtt": ["NeptuneDBCluster", "Endpoint"]}}}}