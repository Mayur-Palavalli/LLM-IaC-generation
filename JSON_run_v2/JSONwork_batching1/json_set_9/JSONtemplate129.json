{"AWSTemplateFormatVersion": "2010-09-09", "Description": "Highly-available RDS DBInstance with a Read Replica using AWS CloudFormation", "Resources": {"MyDBSubnetGroup": {"Type": "AWS::RDS::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for RDS Instance", "SubnetIds": ["subnet-xxxxxx1", "subnet-xxxxxx2"]}}, "MyDBInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"AllocatedStorage": "20", "DBInstanceClass": "db.t3.small", "Engine": "mysql", "MasterUsername": "admin", "MasterUserPassword": {"Ref": "MyDBPassword"}, "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "VPCSecurityGroups": ["sg-xxxxxx"], "MultiAZ": true}}, "MyReadReplica": {"Type": "AWS::RDS::DBInstance", "Properties": {"SourceDBInstanceIdentifier": {"Ref": "MyDBInstance"}, "DBInstanceClass": "db.t3.small", "Engine": "mysql", "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "VPCSecurityGroups": ["sg-xxxxxx"]}}, "MyDBPassword": {"Type": "AWS::SSM::Parameter", "Properties": {"Name": "/myapp/DBPassword", "Type": "String", "Value": "replace-with-your-secure-string"}}}, "Outputs": {"DBInstanceEndpoint": {"Description": "The endpoint address of the RDS DB instance", "Value": {"Fn::GetAtt": ["MyDBInstance", "Endpoint.Address"]}}, "ReadReplicaEndpoint": {"Description": "The endpoint address of the RDS Read Replica", "Value": {"Fn::GetAtt": ["MyReadReplica", "Endpoint.Address"]}}}}