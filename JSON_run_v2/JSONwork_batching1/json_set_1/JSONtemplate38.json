{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"TableList": {"Type": "AWS::CloudFormation::CustomResource", "Properties": {"ServiceToken": {"Fn::GetAtt": ["LambdaFunction", "Arn"]}, "ResourceProperties": {"Tables": ["Table1", "Table2", "Table3"]}}}, "LambdaFunction": {"Type": "AWS::Lambda::Function", "Properties": {"Handler": "index.handler", "Role": "arn:aws:iam::123456789012:role/execution_role", "Code": {"ZipFile": {"Fn::Join": ["", ["var response = require('cfn-response');\n", "exports.handler = function(event, context) {\n", "var responseData = {};\n", "if (event.RequestType == 'Create') {\n", "  var tables = event.ResourceProperties.Tables;\n", "  for (var i = 0; i < tables.length; i++) {\n", "    responseData['Table' + i] = tables[i];\n", "  }\n", "  response.send(event, context, response.SUCCESS, responseData);\n", "}\n", "};"]]}}, "Runtime": "nodejs12.x"}}}, "Outputs": {"Tables": {"Value": {"Fn::ForEach": ["TableName", ["Table1", "Table2", "Table3"], {"Fn::Sub": "${TableName}"}]}}}}