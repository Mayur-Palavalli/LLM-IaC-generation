{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"NeptuneDBCluster": {"Type": "AWS::Neptune::DBCluster", "Properties": {"DBClusterIdentifier": "neptune-cluster", "Engine": "neptune", "MasterUsername": {"Ref": "DBMasterUser"}, "MasterUserPassword": {"Ref": "DBMasterPassword"}, "BackupRetentionPeriod": 1, "PreferredBackupWindow": "07:00-09:00"}}, "NeptuneDBInstance": {"Type": "AWS::Neptune::DBInstance", "Properties": {"DBInstanceClass": "db.r5.large", "DBClusterIdentifier": {"Ref": "NeptuneDBCluster"}}}, "NeptuneDBSubnetGroup": {"Type": "AWS::Neptune::DBSubnetGroup", "Properties": {"DBSubnetGroupName": "neptune-subnet-group", "SubnetIds": ["subnet-0bb1c79de3EXAMPLE", "subnet-067e51fceEXAMPLE"], "DBSubnetGroupDescription": "Subnet group for Neptune cluster"}}, "DBMasterUser": {"Type": "AWS::SSM::Parameter", "Properties": {"Type": "String", "Value": "dbusername"}}, "DBMasterPassword": {"Type": "AWS::SSM::Parameter", "Properties": {"Type": "String", "Value": "dbpassword"}}, "CloudWatchLogGroup": {"Type": "AWS::Logs::LogGroup", "Properties": {"LogGroupName": "/aws/neptune/logs", "RetentionInDays": 7}}, "NeptuneDBClusterParameterGroup": {"Type": "AWS::Neptune::DBClusterParameterGroup", "Properties": {"Description": "Neptune cluster parameter group", "Family": "neptune1", "Parameters": {"neptune_enable_audit_log": "1"}}}, "CloudWatchAlarm": {"Type": "AWS::CloudWatch::Alarm", "Properties": {"AlarmDescription": "Alarm if CPU utilization exceeds 80%", "Namespace": "AWS/Neptune", "MetricName": "CPUUtilization", "Dimensions": [{"Name": "DBInstanceIdentifier", "Value": {"Ref": "NeptuneDBInstance"}}], "ComparisonOperator": "GreaterThanThreshold", "Threshold": 80, "Period": 300, "EvaluationPeriods": 1, "AlarmActions": [{"Ref": "SNSTopic"}]}}, "SNSTopic": {"Type": "AWS::SNS::Topic", "Properties": {"TopicName": "neptune-alarms"}}}}