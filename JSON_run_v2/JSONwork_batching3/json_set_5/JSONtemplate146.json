{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"S3Bucket": {"Type": "AWS::S3::Bucket", "Properties": {"BucketEncryption": {"ServerSideEncryptionConfiguration": [{"ServerSideEncryptionByDefault": {"SSEAlgorithm": "AES256"}}]}, "PublicAccessBlockConfiguration": {"BlockPublicAcls": true, "IgnorePublicAcls": true, "BlockPublicPolicy": true, "RestrictPublicBuckets": true}, "WebsiteConfiguration": {"IndexDocument": "index.html", "ErrorDocument": "error.html"}}}, "CloudFrontDistribution": {"Type": "AWS::CloudFront::Distribution", "Properties": {"DistributionConfig": {"Origins": [{"Id": {"Ref": "S3Bucket"}, "DomainName": {"Fn::GetAtt": ["S3Bucket", "RegionalDomainName"]}, "S3OriginConfig": {}}], "Enabled": true, "DefaultRootObject": "index.html", "DefaultCacheBehavior": {"TargetOriginId": {"Ref": "S3Bucket"}, "ViewerProtocolPolicy": "redirect-to-https", "AllowedMethods": ["GET", "HEAD"], "CachedMethods": ["GET", "HEAD"], "ForwardedValues": {"QueryString": false, "Cookies": {"Forward": "none"}}}, "ViewerCertificate": {"CloudFrontDefaultCertificate": true}}}}, "CloudFrontOAI": {"Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity", "Properties": {"CloudFrontOriginAccessIdentityConfig": {"Comment": "Access identity for static website"}}}, "BucketPolicy": {"Type": "AWS::S3::BucketPolicy", "Properties": {"Bucket": {"Ref": "S3Bucket"}, "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"CanonicalUser": {"Fn::GetAtt": ["CloudFrontOAI", "S3CanonicalUserId"]}}, "Action": "s3:GetObject", "Resource": {"Fn::Join": ["", ["arn:aws:s3:::", {"Ref": "S3Bucket"}, "/*"]]}}]}}}}, "Outputs": {"WebsiteURL": {"Value": {"Fn::GetAtt": ["S3Bucket", "WebsiteURL"]}, "Description": "URL for website hosted on S3"}, "CloudFrontURL": {"Value": {"Fn::GetAtt": ["CloudFrontDistribution", "DomainName"]}, "Description": "URL for CloudFront distribution"}}}