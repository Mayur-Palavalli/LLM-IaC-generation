{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template to create AWS Greengrass resources and group with supporting AWS services.", "Resources": {"GreengrassServiceRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "greengrass.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Policies": [{"PolicyName": "GreengrassServiceRolePolicy", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["iot:*", "lambda:*", "s3:*", "logs:*", "cloudwatch:*", "greengrass:*"], "Resource": "*"}]}}], "Path": "/"}}, "GreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"Name": "MyGreengrassGroup", "RoleArn": {"Fn::GetAtt": ["GreengrassServiceRole", "Arn"]}, "InitialVersion": {"CoreDefinitionVersionArn": {"Ref": "CoreDefinitionVersion"}}}}, "CoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "MyCoreDefinition"}}, "CoreDefinitionVersion": {"Type": "AWS::Greengrass::CoreDefinitionVersion", "Properties": {"CoreDefinitionId": {"Ref": "CoreDefinition"}, "Cores": [{"Id": "MyCore", "CertificateArn": {"Ref": "CoreCertificate"}, "ThingArn": {"Ref": "CoreThing"}}]}}, "CoreCertificate": {"Type": "AWS::IoT::Certificate", "Properties": {"Status": "ACTIVE"}}, "CoreThing": {"Type": "AWS::IoT::Thing", "Properties": {"ThingName": "MyGreengrassCore"}}}, "Outputs": {"GreengrassGroupID": {"Description": "ID of the Greengrass Group", "Value": {"Ref": "GreengrassGroup"}}, "GreengrassCoreThingARN": {"Description": "ARN of the Greengrass Core Thing", "Value": {"Fn::GetAtt": ["CoreThing", "Arn"]}}}}