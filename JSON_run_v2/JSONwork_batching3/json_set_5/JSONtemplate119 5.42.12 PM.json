{"AWSTemplateFormatVersion": "2010-09-09", "Description": "A CloudFormation template to create an IoT Analytics Channel, Datastore, Pipeline and Dataset with a SQL action.", "Resources": {"MyIoTChannel": {"Type": "AWS::IoTAnalytics::Channel", "Properties": {}}, "MyIoTDatastore": {"Type": "AWS::IoTAnalytics::Datastore", "Properties": {}}, "MyIoTPipeline": {"Type": "AWS::IoTAnalytics::Pipeline", "Properties": {"PipelineActivities": [{"Channel": {"Name": "FirstChannelActivity", "ChannelName": {"Ref": "MyIoTChannel"}, "Next": "SqlActivityName"}}, {"SelectAttributes": {"Name": "SqlActivityName", "Attributes": ["*"], "Next": "MyDatastoreActivity"}}, {"Datastore": {"Name": "MyDatastoreActivity", "DatastoreName": {"Ref": "MyIoTDatastore"}}}]}}, "MyIoTDataset": {"Type": "AWS::IoTAnalytics::Dataset", "Properties": {"Actions": [{"ActionName": "MyDatasetAction", "QueryAction": {"SqlQuery": "SELECT * FROM my_table"}}], "Triggers": [{"Schedule": {"ScheduleExpression": "cron(0/15 * * * ? *)"}}], "ContentDeliveryRules": [{"Destination": {"IotEventsDestinationConfiguration": {"InputName": "MyIotInput", "RoleArn": "arn:aws:iam::123456789012:role/serviceRole"}}, "EntryName": "MyDeliveryRule"}]}}}}