{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"GreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"InitialVersion": {"CoreDefinitionVersionArn": {"Ref": "GreengrassCoreVersion"}, "DeviceDefinitionVersionArn": {"Ref": "GreengrassDeviceVersion"}, "SubscriptionDefinitionVersionArn": {"Ref": "GreengrassSubscriptionVersion"}, "FunctionDefinitionVersionArn": {"Ref": "GreengrassFunctionVersion"}}, "Name": "MyGreengrassGroup"}}, "GreengrassCoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "MyCoreDefinition", "InitialVersion": {"Cores": [{"CertificateArn": {"Ref": "CoreCertificateArn"}, "Id": "MyCoreId", "ThingArn": {"Ref": "CoreThingArn"}}]}}}, "GreengrassCoreVersion": {"Type": "AWS::Greengrass::CoreDefinitionVersion", "Properties": {"CoreDefinitionId": {"Ref": "GreengrassCoreDefinition"}, "Cores": [{"CertificateArn": {"Ref": "CoreCertificateArn"}, "Id": "MyCoreId", "ThingArn": {"Ref": "CoreThingArn"}}]}}, "GreengrassDeviceDefinition": {"Type": "AWS::Greengrass::DeviceDefinition", "Properties": {"Name": "MyDeviceDefinition", "InitialVersion": {"Devices": [{"CertificateArn": {"Ref": "DeviceCertificateArn"}, "Id": "MyDeviceId", "SyncShadow": true, "ThingArn": {"Ref": "DeviceThingArn"}}]}}}, "GreengrassDeviceVersion": {"Type": "AWS::Greengrass::DeviceDefinitionVersion", "Properties": {"DeviceDefinitionId": {"Ref": "GreengrassDeviceDefinition"}, "Devices": [{"CertificateArn": {"Ref": "DeviceCertificateArn"}, "Id": "MyDeviceId", "SyncShadow": true, "ThingArn": {"Ref": "DeviceThingArn"}}]}}, "GreengrassSubscriptionDefinition": {"Type": "AWS::Greengrass::SubscriptionDefinition", "Properties": {"Name": "MySubscriptionDefinition", "InitialVersion": {"Subscriptions": [{"Id": "MySubscriptionId", "Source": "*", "Subject": "my/topic", "Target": "*"}]}}}, "GreengrassSubscriptionVersion": {"Type": "AWS::Greengrass::SubscriptionDefinitionVersion", "Properties": {"SubscriptionDefinitionId": {"Ref": "GreengrassSubscriptionDefinition"}, "Subscriptions": [{"Id": "MySubscriptionId", "Source": "*", "Subject": "my/topic", "Target": "*"}]}}, "GreengrassFunctionDefinition": {"Type": "AWS::Greengrass::FunctionDefinition", "Properties": {"Name": "MyFunctionDefinition", "InitialVersion": {"Functions": [{"Id": "MyFunctionId", "FunctionArn": {"Ref": "FunctionArn"}, "FunctionConfiguration": {"Pinned": true, "MemorySize": 128000000}}]}}}, "GreengrassFunctionVersion": {"Type": "AWS::Greengrass::FunctionDefinitionVersion", "Properties": {"FunctionDefinitionId": {"Ref": "GreengrassFunctionDefinition"}, "Functions": [{"Id": "MyFunctionId", "FunctionArn": {"Ref": "FunctionArn"}, "FunctionConfiguration": {"Pinned": true, "MemorySize": 128000000}}]}}}}