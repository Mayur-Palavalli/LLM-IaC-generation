{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for provisioning Neptune DB with CI/CD, CloudWatch and SNS.", "Resources": {"NeptuneDBSubnetGroup": {"Type": "AWS::Neptune::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet Group for Neptune DB", "SubnetIds": ["subnet-12345678", "subnet-87654321"]}}, "NeptuneDBInstance": {"Type": "AWS::Neptune::DBInstance", "Properties": {"DBInstanceClass": "db.r5.large", "DBSubnetGroupName": {"Ref": "NeptuneDBSubnetGroup"}, "DBClusterIdentifier": {"Ref": "NeptuneDBCluster"}}}, "NeptuneDBCluster": {"Type": "AWS::Neptune::DBCluster", "Properties": {"DBClusterIdentifier": "neptune-cluster", "DBSubnetGroupName": {"Ref": "NeptuneDBSubnetGroup"}, "VpcSecurityGroupIds": ["sg-0102030405060708"]}}, "NeptuneParameterGroup": {"Type": "AWS::Neptune::DBParameterGroup", "Properties": {"Description": "Custom Parameters for Neptune", "Family": "neptune1", "Parameters": {"neptune_query_timeout": "120000"}}}, "CloudWatchAlarm": {"Type": "AWS::CloudWatch::Alarm", "Properties": {"AlarmDescription": "Monitor Neptune DB CPU Utilization", "MetricName": "CPUUtilization", "Namespace": "AWS/Neptune", "Statistic": "Average", "Period": 300, "EvaluationPeriods": 1, "Threshold": 90, "ComparisonOperator": "GreaterThanOrEqualToThreshold", "AlarmActions": [{"Ref": "SNSTopic"}], "Dimensions": [{"Name": "DBInstanceIdentifier", "Value": {"Ref": "NeptuneDBInstance"}}]}}, "SNSTopic": {"Type": "AWS::SNS::Topic", "Properties": {"TopicName": "neptune-alerts"}}, "SNSSubscription": {"Type": "AWS::SNS::Subscription", "Properties": {"TopicArn": {"Ref": "SNSTopic"}, "Protocol": "email", "Endpoint": "your-email@example.com"}}}, "Outputs": {"NeptuneClusterEndpoint": {"Description": "Endpoint of Neptune DB cluster", "Value": {"Fn::GetAtt": ["NeptuneDBCluster", "Endpoint"]}}, "NeptuneClusterReadEndpoint": {"Description": "Read endpoint of Neptune DB cluster", "Value": {"Fn::GetAtt": ["NeptuneDBCluster", "ReadEndpoint"]}}}}