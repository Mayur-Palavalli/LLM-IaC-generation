{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation for IoT Analytics with Channel, Datastore, Pipeline, and Dataset.", "Resources": {"AnalyticsChannel": {"Type": "AWS::IoTAnalytics::Channel", "Properties": {}}, "AnalyticsDatastore": {"Type": "AWS::IoTAnalytics::Datastore", "Properties": {}}, "AnalyticsPipeline": {"Type": "AWS::IoTAnalytics::Pipeline", "Properties": {"Activities": [{"Channel": {"Name": "SourceChannel", "ChannelName": {"Ref": "AnalyticsChannel"}, "Next": "SqlActivity"}}, {"SqlActivity": {"Name": "SqlActivity", "SqlQuery": "SELECT * FROM data", "Next": "DatastoreActivity"}}, {"Datastore": {"Name": "DatastoreActivity", "DatastoreName": {"Ref": "AnalyticsDatastore"}}}]}}, "AnalyticsDataset": {"Type": "AWS::IoTAnalytics::Dataset", "Properties": {"Actions": [{"ActionName": "DatasetAction", "QueryAction": {"SqlQuery": "SELECT * FROM channeldata"}}], "Triggers": [{"Schedule": {"ScheduleExpression": "rate(1 day)"}}]}}}}