{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for a Multi-AZ EFS with automount on EC2 instances.", "Resources": {"MyEFSFileSystem": {"Type": "AWS::EFS::FileSystem", "Properties": {"Encrypted": true, "PerformanceMode": "generalPurpose", "ThroughputMode": "bursting", "BackupPolicy": {"Status": "ENABLED"}, "FileSystemTags": [{"Key": "Name", "Value": "MyEFSFileSystem"}]}}, "MountTarget1": {"Type": "AWS::EFS::MountTarget", "Properties": {"FileSystemId": {"Ref": "MyEFSFileSystem"}, "SubnetId": "subnet-12345678", "SecurityGroups": ["sg-12345678"]}}, "MountTarget2": {"Type": "AWS::EFS::MountTarget", "Properties": {"FileSystemId": {"Ref": "MyEFSFileSystem"}, "SubnetId": "subnet-87654321", "SecurityGroups": ["sg-87654321"]}}, "EC2Instance": {"Type": "AWS::EC2::Instance", "Properties": {"InstanceType": "t2.micro", "ImageId": "ami-abcdefgh", "KeyName": "my-key-pair", "SubnetId": "subnet-12345678", "SecurityGroupIds": ["sg-12345678"], "UserData": {"Fn::Base64": {"Fn::Sub": ["#!/bin/bash\nyum update -y\nyum install -y amazon-efs-utils\nmount -t efs ${FileSystemId}:/ /mnt/efs\n", {"FileSystemId": {"Ref": "MyEFSFileSystem"}}]}}}}}}