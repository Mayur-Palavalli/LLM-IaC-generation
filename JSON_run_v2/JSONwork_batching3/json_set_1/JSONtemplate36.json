{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"DynamoDBTableLoop": {"Type": "Custom::ForEach", "Properties": {"ServiceToken": "arn:aws:lambda:<region>:<account-id>:function:<function-name>", "Iterator": [{"TableName": "Table1", "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}, {"TableName": "Table2", "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}], "Template": {"DynamoDBTable": {"Type": "AWS::DynamoDB::Table", "Properties": {"TableName": {"Fn::Select": ["TableName", {"Fn::GetAtt": ["DynamoDBTableLoop", "Iterator"]}]}, "AttributeDefinitions": {"Fn::Select": ["AttributeDefinitions", {"Fn::GetAtt": ["DynamoDBTableLoop", "Iterator"]}]}, "KeySchema": {"Fn::Select": ["KeySchema", {"Fn::GetAtt": ["DynamoDBTableLoop", "Iterator"]}]}, "ProvisionedThroughput": {"Fn::Select": ["ProvisionedThroughput", {"Fn::GetAtt": ["DynamoDBTableLoop", "Iterator"]}]}}}}}}}}