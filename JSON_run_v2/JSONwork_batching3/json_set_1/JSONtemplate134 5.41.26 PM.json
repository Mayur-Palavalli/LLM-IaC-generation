{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template to create a RDS DBInstance with snapshot on stack deletion.", "Resources": {"MyDBInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"DBInstanceClass": "db.t3.micro", "AllocatedStorage": "20", "Engine": "MySQL", "MasterUsername": "adminuser", "MasterUserPassword": "adminpassword123", "DBSnapshotIdentifier": {"Fn::If": ["UseSnapshot", {"Ref": "SnapshotName"}, {"Ref": "AWS::NoValue"}]}, "DeletionPolicy": "Snapshot"}}}, "Parameters": {"SnapshotName": {"Description": "Name of snapshot to use for database restoration. Use only if you are restoring from an existing snapshot.", "Type": "String", "Default": "", "AllowedPattern": "[a-zA-Z0-9]*", "ConstraintDescription": "must consist of alphanumeric characters only"}}, "Conditions": {"UseSnapshot": {"Fn::Not": [{"Fn::Equals": [{"Ref": "SnapshotName"}, ""]}]}}}