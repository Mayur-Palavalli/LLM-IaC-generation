{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template to create AWS Greengrass resources and group with supporting services", "Resources": {"GreengrassServiceRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "greengrass.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Policies": [{"PolicyName": "GreengrassServiceRolePolicy", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["cloudwatch:PutMetricData", "iot:*", "logs:CreateLogGroup", "logs:CreateLogStream", "logs:PutLogEvents", "s3:GetBucketLocation", "s3:GetObject", "s3:ListBucket"], "Resource": "*"}]}}]}}, "GreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"Name": "MyGreengrassGroup", "RoleArn": {"Fn::GetAtt": ["GreengrassServiceRole", "Arn"]}, "CoreDefinitionVersionArn": {"Ref": "CoreDefinition"}}}, "CoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"InitialVersion": {"Cores": [{"Id": "CoreId", "ThingArn": {"Ref": "GreengrassCoreThing"}, "CertificateArn": {"Ref": "GreengrassCoreCertificate"}, "SyncShadow": true}]}}}, "GreengrassCoreThing": {"Type": "AWS::IoT::Thing", "Properties": {"ThingName": "GGC_Thing"}}, "GreengrassCoreCertificate": {"Type": "AWS::IoT::Certificate", "Properties": {"Status": "ACTIVE", "CertificatePem": "BASE64ENCODEDCERTIFICATE", "PublicKey": "BASE64ENCODEDPUBLICKEY", "PrivateKey": "BASE64ENCODEDPRIVATEKEY", "CaCertificatePem": "BASE64ENCODEDCACERTIFICATE"}}}, "Outputs": {"GreengrassRoleArn": {"Description": "ARN of the Greengrass service role", "Value": {"Fn::GetAtt": ["GreengrassServiceRole", "Arn"]}}, "GreengrassGroupArn": {"Description": "ARN of theGreengrassGroup", "Value": {"Ref": "GreengrassGroup"}}}}