{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"DynamoDBTableList": {"Type": "AWS::CloudFormation::CustomResource", "DeletionPolicy": "Retain", "Properties": {"ServiceToken": {"Fn::ImportValue": "LambdaForCustomResourceServiceToken"}, "Tables": [{"TableName": "Table1", "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}, {"TableName": "Table2", "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}]}}, "DynamoDBTable1": {"Type": "AWS::DynamoDB::Table", "Properties": {"TableName": {"Fn::Select": [0, {"Fn::GetAtt": ["DynamoDBTableList", "Tables"]}]}, "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}}, "DynamoDBTable2": {"Type": "AWS::DynamoDB::Table", "Properties": {"TableName": {"Fn::Select": [1, {"Fn::GetAtt": ["DynamoDBTableList", "Tables"]}]}, "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}}}}