{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"NetworkLoadBalancer": {"Type": "AWS::ElasticLoadBalancingV2::LoadBalancer", "Properties": {"Name": "MyNetworkLoadBalancer", "Type": "network", "Subnets": [{"Ref": "Subnet1"}, {"Ref": "Subnet2"}], "Scheme": "internet-facing"}}, "Listener": {"Type": "AWS::ElasticLoadBalancingV2::Listener", "Properties": {"DefaultActions": [{"Type": "forward", "TargetGroupArn": {"Ref": "TargetGroup"}}], "LoadBalancerArn": {"Ref": "NetworkLoadBalancer"}, "Port": 80, "Protocol": "TCP"}}, "TargetGroup": {"Type": "AWS::ElasticLoadBalancingV2::TargetGroup", "Properties": {"Name": "MyTargetGroup", "Port": 80, "Protocol": "TCP", "VpcId": {"Ref": "VpcId"}, "TargetType": "instance"}}, "EIP1": {"Type": "AWS::EC2::EIP"}, "EIPAssociation1": {"Type": "AWS::EC2::EIPAssociation", "Properties": {"AllocationId": {"Fn::GetAtt": ["EIP1", "AllocationId"]}, "NetworkInterfaceId": {"Fn::Select": ["0", {"Fn::GetAtt": ["NetworkLoadBalancer", "NetworkInterfaces"]}]}}}, "EIP2": {"Type": "AWS::EC2::EIP"}, "EIPAssociation2": {"Type": "AWS::EC2::EIPAssociation", "Properties": {"AllocationId": {"Fn::GetAtt": ["EIP2", "AllocationId"]}, "NetworkInterfaceId": {"Fn::Select": ["1", {"Fn::GetAtt": ["NetworkLoadBalancer", "NetworkInterfaces"]}]}}}}, "Parameters": {"Subnet1": {"Description": "The first subnet ID for the NLB", "Type": "String"}, "Subnet2": {"Description": "The second subnet ID for the NLB", "Type": "String"}, "VpcId": {"Description": "The VPC ID for the NLB", "Type": "String"}}, "Outputs": {"NetworkLoadBalancerDNSName": {"Description": "DNS Name of the Network Load Balancer", "Value": {"Fn::GetAtt": ["NetworkLoadBalancer", "DNSName"]}}}}