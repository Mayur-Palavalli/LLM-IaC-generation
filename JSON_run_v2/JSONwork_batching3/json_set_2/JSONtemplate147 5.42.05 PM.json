{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for a static website using S3 and CloudFront.", "Resources": {"S3BucketForWebsite": {"Type": "AWS::S3::Bucket", "Properties": {"BucketName": {"Ref": "WebsiteBucketName"}, "WebsiteConfiguration": {"IndexDocument": "index.html", "ErrorDocument": "error.html"}, "OwnershipControls": {"Rules": [{"ObjectOwnership": "BucketOwnerPreferred"}]}}, "DeletionPolicy": "Retain", "UpdateReplacePolicy": "Retain"}, "S3BucketPolicy": {"Type": "AWS::S3::BucketPolicy", "Properties": {"Bucket": {"Ref": "S3BucketForWebsite"}, "PolicyDocument": {"Statement": [{"Sid": "PublicReadGetObject", "Effect": "Allow", "Principal": "*", "Action": "s3:GetObject", "Resource": {"Fn::Join": ["", ["arn:aws:s3:::", {"Ref": "S3BucketForWebsite"}, "/*"]]}}]}}}, "CloudFrontDistribution": {"Type": "AWS::CloudFront::Distribution", "Properties": {"DistributionConfig": {"Enabled": true, "Origins": [{"DomainName": {"Fn::GetAtt": ["S3BucketForWebsite", "DomainName"]}, "Id": "S3Origin", "S3OriginConfig": {"OriginAccessIdentity": ""}}], "DefaultCacheBehavior": {"TargetOriginId": "S3Origin", "ViewerProtocolPolicy": "redirect-to-https", "AllowedMethods": ["GET", "HEAD"], "CachedMethods": ["GET", "HEAD"], "Compress": true, "ForwardedValues": {"QueryString": false, "Cookies": {"Forward": "none"}}}, "ViewerCertificate": {"CloudFrontDefaultCertificate": true}, "CustomErrorResponses": [{"ErrorCode": 404, "ResponsePagePath": "/error.html", "ResponseCode": 404}, {"ErrorCode": 403, "ResponsePagePath": "/index.html", "ResponseCode": 200}]}}}}, "Parameters": {"WebsiteBucketName": {"Type": "String", "Description": "The name of the S3 bucket to create for the website."}}, "Outputs": {"WebsiteURL": {"Description": "URL of the website", "Value": {"Fn::GetAtt": ["S3BucketForWebsite", "WebsiteURL"]}}, "CloudFrontDistributionID": {"Description": "The CloudFront Distribution ID", "Value": {"Ref": "CloudFrontDistribution"}}}}