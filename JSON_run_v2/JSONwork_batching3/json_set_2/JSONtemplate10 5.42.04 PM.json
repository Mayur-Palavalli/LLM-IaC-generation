{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation Sample Template for App Runner Service from existing ECR Repository.", "Parameters": {"ECRRepositoryName": {"Type": "String", "Description": "Name of the existing ECR Repository"}, "ECRImageTag": {"Type": "String", "Default": "latest", "Description": "Tag of the Docker image in ECR to use"}, "ServiceName": {"Type": "String", "Description": "Name for the App Runner service"}}, "Resources": {"AppRunnerService": {"Type": "AWS::AppRunner::Service", "Properties": {"ServiceName": {"Ref": "ServiceName"}, "SourceConfiguration": {"ImageRepository": {"ImageIdentifier": {"Fn::Join": ["", [{"Fn::Sub": "${AWS::AccountId}.dkr.ecr.${AWS::Region}.amazonaws.com/"}, {"Ref": "ECRRepositoryName"}, ":", {"Ref": "ECRImageTag"}]]}, "ImageConfiguration": {"Port": "80"}, "ImageRepositoryType": "ECR"}, "AuthenticationConfiguration": {"AccessRoleArn": {"Fn::GetAtt": ["ECRAccessRole", "Arn"]}}}, "AutoScalingConfiguration": {"MaxSize": 3, "MinSize": 1, "AutoScalingConfigurationName": "MyAutoScalingConfiguration"}}}, "ECRAccessRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "build.apprunner.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "ManagedPolicyArns": ["arn:aws:iam::aws:policy/service-role/AWSAppRunnerServicePolicyForECRAccess"]}}}, "Outputs": {"ServiceUrl": {"Description": "URL of the App Runner service", "Value": {"Fn::GetAtt": ["AppRunnerService", "ServiceUrl"]}}}}