{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for a highly-available RDS DBInstance with a read replica.", "Resources": {"MyDBSubnetGroup": {"Type": "AWS::RDS::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet Group for RDS DB Instance", "SubnetIds": ["subnet-12345678", "subnet-87654321"]}}, "MyDBInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"DBInstanceIdentifier": "MyDB", "AllocatedStorage": "100", "DBInstanceClass": "db.t3.medium", "Engine": "mysql", "MasterUsername": "adminuser", "MasterUserPassword": "adminpassword123", "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "MultiAZ": true, "PubliclyAccessible": false, "StorageType": "gp2", "BackupRetentionPeriod": 7, "DBName": "MyDatabase", "VPCSecurityGroups": ["sg-0123456789abcdef0"]}}, "MyReadReplica": {"Type": "AWS::RDS::DBInstance", "Properties": {"SourceDBInstanceIdentifier": {"Ref": "MyDBInstance"}, "DBInstanceClass": "db.t3.medium", "PubliclyAccessible": false}}}, "Outputs": {"DBInstanceEndpoint": {"Description": "Endpoint of the master DB instance", "Value": {"Fn::GetAtt": ["MyDBInstance", "Endpoint.Address"]}, "Export": {"Name": {"Fn::Sub": "${AWS::StackName}-DBEndpoint"}}}, "ReadReplicaEndpoint": {"Description": "Endpoint of the read replica DB instance", "Value": {"Fn::GetAtt": ["MyReadReplica", "Endpoint.Address"]}, "Export": {"Name": {"Fn::Sub": "${AWS::StackName}-ReadReplicaEndpoint"}}}}}