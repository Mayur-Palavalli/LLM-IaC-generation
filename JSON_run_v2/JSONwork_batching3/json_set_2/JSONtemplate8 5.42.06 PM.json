{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template to create an App Runner Service from an existing ECR repository.", "Parameters": {"ServiceName": {"Type": "String", "Description": "Name of the App Runner service"}, "ECRRepositoryArn": {"Type": "String", "Description": "ARN of the existing ECR repository"}, "ECRImageTag": {"Type": "String", "Default": "latest", "Description": "The image tag to be used for creating the service."}}, "Resources": {"AppRunnerService": {"Type": "AWS::AppRunner::Service", "Properties": {"ServiceName": {"Ref": "ServiceName"}, "SourceConfiguration": {"ImageRepository": {"ImageRepositoryType": "ECR", "ImageIdentifier": {"Fn::Join": ["", [{"Ref": "ECRRepositoryArn"}, ":", {"Ref": "ECRImageTag"}]]}, "ImageConfiguration": {"Port": "8000"}, "Policies": [{"PolicyStatement": {"Effect": "Allow", "Action": ["ecr:BatchCheckLayerAvailability", "ecr:GetDownloadUrlForLayer", "ecr:BatchGetImage"], "Resource": {"Ref": "ECRRepositoryArn"}}}]}}, "InstanceConfiguration": {"Cpu": "1024", "Memory": "2 GB"}, "AutoScalingConfigurationSummary": {"MaxSize": 3, "MinSize": 1}}}}, "Outputs": {"ServiceArn": {"Description": "ARN of the App Runner Service", "Value": {"Fn::GetAtt": ["AppRunnerService", "Arn"]}}, "ServiceUrl": {"Description": "URL of the App Runner Service", "Value": {"Fn::GetAtt": ["AppRunnerService", "ServiceUrl"]}}}}