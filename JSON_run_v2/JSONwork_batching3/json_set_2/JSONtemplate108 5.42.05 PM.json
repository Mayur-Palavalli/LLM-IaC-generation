{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for a Network Load Balancer with EIPs in 2 AZs", "Resources": {"ElasticIP1": {"Type": "AWS::EC2::EIP"}, "ElasticIP2": {"Type": "AWS::EC2::EIP"}, "LoadBalancer": {"Type": "AWS::ElasticLoadBalancingV2::LoadBalancer", "Properties": {"Name": "MyNetworkLoadBalancer", "Scheme": "internet-facing", "Type": "network", "IpAddressType": "ipv4", "Subnets": [{"Ref": "SubnetA"}, {"Ref": "SubnetB"}], "LoadBalancerAttributes": [{"Key": "load_balancing.cross_zone.enabled", "Value": "true"}]}}, "LoadBalancerListener": {"Type": "AWS::ElasticLoadBalancingV2::Listener", "Properties": {"DefaultActions": [{"Type": "forward", "TargetGroupArn": {"Ref": "TargetGroup"}}], "LoadBalancerArn": {"Ref": "LoadBalancer"}, "Port": 80, "Protocol": "TCP"}}, "TargetGroup": {"Type": "AWS::ElasticLoadBalancingV2::TargetGroup", "Properties": {"Port": 80, "Protocol": "TCP", "VpcId": {"Ref": "VpcId"}}}, "SubnetA": {"Type": "AWS::EC2::Subnet", "Properties": {"VpcId": {"Ref": "VpcId"}, "AvailabilityZone": {"Fn::Select": [0, {"Fn::GetAZs": ""}]}}}, "SubnetB": {"Type": "AWS::EC2::Subnet", "Properties": {"VpcId": {"Ref": "VpcId"}, "AvailabilityZone": {"Fn::Select": [1, {"Fn::GetAZs": ""}]}}}}, "Parameters": {"VpcId": {"Type": "AWS::EC2::VPC::Id", "Description": "VPC id where the resources will be deployed."}}}