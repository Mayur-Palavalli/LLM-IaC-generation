{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"MyDBParameterGroup": {"Type": "AWS::RDS::DBParameterGroup", "Properties": {"Description": "My DB parameter group", "Family": "aurora5.6", "Parameters": {"character_set_server": "utf8mb4", "character_set_client": "utf8mb4"}}}, "MyDBInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"DBInstanceIdentifier": "my-db-instance", "DBName": "mydatabase", "AllocatedStorage": "20", "DBInstanceClass": "db.t3.medium", "Engine": "mysql", "MasterUsername": "admin", "MasterUserPassword": "{{resolve:ssm-secure:/my/secure/param:1}}", "VPCSecurityGroups": [{"Fn::GetAtt": ["MyDBSecurityGroup", "GroupId"]}], "AvailabilityZone": {"Fn::Select": ["0", {"Fn::GetAZs": ""}]}, "DBParameterGroupName": {"Ref": "MyDBParameterGroup"}, "MultiAZ": true, "PubliclyAccessible": false, "StorageType": "gp2", "BackupRetentionPeriod": 7}}, "MyDBReadReplica": {"Type": "AWS::RDS::DBInstance", "Properties": {"SourceDBInstanceIdentifier": {"Ref": "MyDBInstance"}, "DBInstanceClass": "db.t3.medium", "Engine": "mysql", "DBParameterGroupName": {"Ref": "MyDBParameterGroup"}, "PubliclyAccessible": false, "AvailabilityZone": {"Fn::Select": ["1", {"Fn::GetAZs": ""}]}}}, "MyDBSecurityGroup": {"Type": "AWS::EC2::SecurityGroup", "Properties": {"GroupDescription": "Enable RDS access", "VpcId": {"Ref": "MyVPC"}, "SecurityGroupIngress": [{"IpProtocol": "tcp", "FromPort": "3306", "ToPort": "3306", "CidrIp": "0.0.0.0/0"}]}}}, "Parameters": {"MyVPC": {"Type": "AWS::EC2::VPC::Id", "Description": "VPC Id"}}}