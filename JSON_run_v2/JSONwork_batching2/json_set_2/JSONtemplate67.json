{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation Template for a single EC2 instance with a single ENI which has multiple private and public IPs.", "Resources": {"MyInstance": {"Type": "AWS::EC2::Instance", "Properties": {"InstanceType": "t2.micro", "KeyName": "my-key-pair", "NetworkInterfaces": [{"NetworkInterfaceId": {"Ref": "MyENI"}, "DeviceIndex": "0"}], "ImageId": "ami-0abcdef1234567890"}}, "MyENI": {"Type": "AWS::EC2::NetworkInterface", "Properties": {"SubnetId": "subnet-0bb1c79de3EXAMPLE", "Description": "Primary network interface", "PrivateIpAddresses": [{"PrivateIpAddress": "10.0.0.10", "Primary": true}, {"PrivateIpAddress": "10.0.0.11"}], "SourceDestCheck": "true"}}, "MyENIAssociation1": {"Type": "AWS::EC2::EIPAssociation", "Properties": {"AllocationId": {"Ref": "MyEIP1"}, "NetworkInterfaceId": {"Ref": "MyENI"}, "PrivateIpAddress": "10.0.0.10"}}, "MyENIAssociation2": {"Type": "AWS::EC2::EIPAssociation", "Properties": {"AllocationId": {"Ref": "MyEIP2"}, "NetworkInterfaceId": {"Ref": "MyENI"}, "PrivateIpAddress": "10.0.0.11"}}, "MyEIP1": {"Type": "AWS::EC2::EIP", "Properties": {"Domain": "vpc"}}, "MyEIP2": {"Type": "AWS::EC2::EIP", "Properties": {"Domain": "vpc"}}}, "Outputs": {"InstanceId": {"Description": "Instance ID of the newly created EC2 instance", "Value": {"Ref": "MyInstance"}}, "PrimaryPrivateIp": {"Description": "Primary private IP address of the ENI", "Value": "10.0.0.10"}, "SecondaryPrivateIp": {"Description": "Secondary private IP address of the ENI", "Value": "10.0.0.11"}, "PrimaryPublicIp": {"Description": "Primary public IP address associated with the ENI", "Value": {"Ref": "MyEIP1"}}, "SecondaryPublicIp": {"Description": "Secondary public IP address associated with the ENI", "Value": {"Ref": "MyEIP2"}}}}