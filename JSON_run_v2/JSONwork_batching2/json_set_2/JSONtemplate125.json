{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template to provision AWS Neptune Graph Database with CloudWatch and SNS integration for CI/CD.", "Resources": {"NeptuneDBCluster": {"Type": "AWS::Neptune::DBCluster", "Properties": {"DBClusterIdentifier": "my-neptune-cluster", "BackupRetentionPeriod": 7, "PreferredBackupWindow": "07:00-09:00", "PreferredMaintenanceWindow": "sun:23:45-mon:00:15", "StorageEncrypted": true}}, "NeptuneDBInstance": {"Type": "AWS::Neptune::DBInstance", "Properties": {"DBInstanceClass": "db.r5.large", "DBClusterIdentifier": {"Ref": "NeptuneDBCluster"}}}, "CloudWatchAlarm": {"Type": "AWS::CloudWatch::Alarm", "Properties": {"AlarmName": "HighCPUUtilization", "ComparisonOperator": "GreaterThanThreshold", "EvaluationPeriods": 1, "MetricName": "CPUUtilization", "Namespace": "AWS/Neptune", "Period": 60, "Statistic": "Average", "Threshold": 80, "AlarmActions": [{"Ref": "SNSTopic"}], "Dimensions": [{"Name": "DBClusterIdentifier", "Value": {"Ref": "NeptuneDBCluster"}}]}}, "SNSTopic": {"Type": "AWS::SNS::Topic", "Properties": {"TopicName": "NeptuneAlerts"}}, "SNSTopicPolicy": {"Type": "AWS::SNS::TopicPolicy", "Properties": {"Topics": [{"Ref": "SNSTopic"}], "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "cloudwatch.amazonaws.com"}, "Action": "SNS:Publish", "Resource": {"Ref": "SNSTopic"}}]}}}}, "Outputs": {"NeptuneDBClusterEndpoint": {"Description": "Endpoint address of the Neptune DB cluster", "Value": {"Fn::GetAtt": ["NeptuneDBCluster", "Endpoint"]}}, "SNSTopicArn": {"Description": "ARN of the SNS topic for CloudWatch alarms", "Value": {"Ref": "SNSTopic"}}}}