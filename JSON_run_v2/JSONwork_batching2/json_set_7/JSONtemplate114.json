{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for AWS Greengrass resources and group with supporting AWS services", "Resources": {"GreengrassCoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "MyGreengrassCoreDefinition", "InitialVersion": {"Cores": [{"CertificateArn": "arn:aws:iot:<region>:<account-id>:cert/<certificate-id>", "Id": "MyCore", "SyncShadow": false, "ThingArn": "arn:aws:iot:<region>:<account-id>:thing/<thing-name>"}]}}}, "GreengrassCoreDefinitionVersion": {"Type": "AWS::Greengrass::CoreDefinitionVersion", "Properties": {"CoreDefinitionId": {"Ref": "GreengrassCoreDefinition"}, "Cores": [{"CertificateArn": "arn:aws:iot:<region>:<account-id>:cert/<certificate-id>", "Id": "MyCore", "SyncShadow": false, "ThingArn": "arn:aws:iot:<region>:<account-id>:thing/<thing-name>"}]}}, "GreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"Name": "MyGreengrassGroup", "InitialVersion": {"CoreDefinitionVersionArn": {"Ref": "GreengrassCoreDefinitionVersion"}}}}, "GreengrassRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "greengrass.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Policies": [{"PolicyName": "GreengrassServiceRolePolicy", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["greengrass:*", "logs:CreateLogStream", "logs:PutLogEvents"], "Resource": "*"}]}}], "RoleName": "GreengrassServiceRole"}}}, "Outputs": {"GreengrassCoreDefinitionId": {"Value": {"Ref": "GreengrassCoreDefinition"}, "Description": "ID of the Greengrass Core Definition"}, "GreengrassGroupId": {"Value": {"Ref": "GreengrassGroup"}, "Description": "ID of the Greengrass Group"}, "GreengrassRoleArn": {"Value": {"Fn::GetAtt": ["GreengrassRole", "Arn"]}, "Description": "ARN of the Greengrass Service Role"}}}