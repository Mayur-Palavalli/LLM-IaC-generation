{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for Greengrass resources and group, with supporting AWS services.", "Resources": {"GreengrassServiceRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "greengrass.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Policies": [{"PolicyName": "GreengrassBasicExecutionPolicy", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["greengrass:*", "iot:*", "lambda:*", "logs:*", "cloudwatch:*"], "Resource": "*"}]}}]}}, "GreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"Name": "MyGreengrassGroup", "InitialVersion": {"CoreDefinitionVersionArn": {"Ref": "GreengrassCoreDefinitionVersion"}}}}, "GreengrassCoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "MyGreengrassCoreDefinition"}}, "GreengrassCoreDefinitionVersion": {"Type": "AWS::Greengrass::CoreDefinitionVersion", "Properties": {"CoreDefinitionId": {"Ref": "GreengrassCoreDefinition"}, "Cores": [{"Id": "1", "CertificateArn": "arn:aws:iot:us-west-2:123456789012:cert/abcdefghij", "ThingArn": {"Ref": "GreengrassCoreThing"}, "SyncShadow": true}]}}, "GreengrassCoreThing": {"Type": "AWS::IoT::Thing", "Properties": {"ThingName": "MyGreengrassCoreThing"}}, "GreengrassCorePolicy": {"Type": "AWS::IoT::Policy", "Properties": {"PolicyName": "MyGreengrassCorePolicy", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["iot:Connect", "iot:Publish", "iot:Subscribe", "iot:Receive", "greengrass:*"], "Resource": "*"}]}}}}, "Outputs": {"GreengrassGroupOutput": {"Description": "Greengrass Group ARN", "Value": {"Fn::GetAtt": ["GreengrassGroup", "Arn"]}}, "GreengrassServiceRoleOutput": {"Description": "Greengrass Service Role ARN", "Value": {"Fn::GetAtt": ["GreengrassServiceRole", "Arn"]}}}}