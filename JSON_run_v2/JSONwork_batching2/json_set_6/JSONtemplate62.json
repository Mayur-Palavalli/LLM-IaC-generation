{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"MyEC2Instance": {"Type": "AWS::EC2::Instance", "Metadata": {"AWS::CloudFormation::Init": {"config": {"files": {"/var/tmp/setup.txt": {"content": "This is a setup file.", "mode": "000644", "owner": "root", "group": "root"}}, "commands": {"01_install_dependencies": {"command": "yum install -y aws-cfn-bootstrap"}, "02_signal_ready": {"command": {"Fn::Sub": ["/opt/aws/bin/cfn-signal -e $? --stack ${AWS::StackName} --resource MyEC2Instance --region ${AWS::Region}"]}}}}}}, "Properties": {"ImageId": "ami-0abcdef1234567890", "InstanceType": "t2.micro", "UserData": {"Fn::Base64": {"Fn::Sub": ["#!/bin/bash\n/opt/aws/bin/cfn-init -v --stack ${AWS::StackName} --resource MyEC2Instance --region ${AWS::Region}\n"]}}}}}}