{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for a highly-available RDS DBInstance with a read replica.", "Resources": {"MyDBSubnetGroup": {"Type": "AWS::RDS::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for RDS DB Instance", "SubnetIds": ["subnet-12345678", "subnet-abcdefgh"]}}, "MyDBInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"DBInstanceClass": "db.t3.micro", "Engine": "mysql", "MasterUsername": "admin", "MasterUserPassword": {"Ref": "MySecretPassword"}, "AllocatedStorage": "20", "MultiAZ": true, "VPCSecurityGroups": ["sg-12345678"], "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "PubliclyAccessible": false}}, "MyReadReplica": {"Type": "AWS::RDS::DBInstance", "Properties": {"SourceDBInstanceIdentifier": {"Ref": "MyDBInstance"}, "DBInstanceClass": "db.t3.micro", "Engine": "mysql", "PubliclyAccessible": false, "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "VPCSecurityGroups": ["sg-12345678"]}}, "MySecret": {"Type": "AWS::SecretsManager::Secret", "Properties": {"Name": "MySecret", "SecretString": "{\"password\": \"example_password\"}"}}, "MySecretPassword": {"Type": "AWS::SecretsManager::Secret", "Properties": {"Name": "MySecretPassword", "SecretString": "example_password"}}}, "Parameters": {}, "Outputs": {"PrimaryDBInstanceEndpoint": {"Description": "Endpoint of the primary RDS DB instance", "Value": {"Fn::GetAtt": ["MyDBInstance", "Endpoint.Address"]}}, "ReadReplicaEndpoint": {"Description": "Endpoint of the read replica RDS DB instance", "Value": {"Fn::GetAtt": ["MyReadReplica", "Endpoint.Address"]}}}}