{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"NeptuneClusterParameterGroup": {"Type": "AWS::Neptune::DBClusterParameterGroup", "Properties": {"Description": "Neptune cluster parameter group", "Family": "neptune1", "Parameters": {"neptune_enable_audit_log": "1"}}}, "NeptuneDBCluster": {"Type": "AWS::Neptune::DBCluster", "Properties": {"DBClusterParameterGroupName": {"Ref": "NeptuneClusterParameterGroup"}, "BackupRetentionPeriod": 1, "DBSubnetGroupName": {"Ref": "NeptuneDBSubnetGroup"}, "VpcSecurityGroupIds": [{"Ref": "NeptuneSecurityGroup"}]}}, "NeptuneDBInstance": {"Type": "AWS::Neptune::DBInstance", "Properties": {"DBClusterIdentifier": {"Ref": "NeptuneDBCluster"}, "DBInstanceClass": "db.r5.large"}}, "NeptuneDBSubnetGroup": {"Type": "AWS::Neptune::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for Neptune DB", "SubnetIds": ["subnet-xxxxxxxx", "subnet-yyyyyyyy"]}}, "NeptuneSecurityGroup": {"Type": "AWS::EC2::SecurityGroup", "Properties": {"GroupDescription": "Security group for Neptune DB", "VpcId": {"Ref": "VpcResourceId"}}}, "CloudWatchLogGroup": {"Type": "AWS::Logs::LogGroup", "Properties": {"LogGroupName": "/aws/neptune/logs"}}, "SNSTopic": {"Type": "AWS::SNS::Topic", "Properties": {"TopicName": "NeptuneAlarms"}}, "CloudWatchAlarm": {"Type": "AWS::CloudWatch::Alarm", "Properties": {"AlarmName": "NeptuneCPUUtilization", "MetricName": "CPUUtilization", "Namespace": "AWS/Neptune", "Statistic": "Average", "Period": 300, "EvaluationPeriods": 1, "Threshold": 80, "ComparisonOperator": "GreaterThanThreshold", "AlarmActions": [{"Ref": "SNSTopic"}]}}}, "Parameters": {"VpcResourceId": {"Type": "AWS::EC2::VPC::Id", "Description": "VpcId for Neptune security group"}}}