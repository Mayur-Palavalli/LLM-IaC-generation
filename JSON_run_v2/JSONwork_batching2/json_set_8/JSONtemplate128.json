{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for a highly-available RDS DBInstance with a Read Replica", "Resources": {"MyDBInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"AllocatedStorage": "20", "DBInstanceClass": "db.m5.large", "Engine": "mysql", "MasterUsername": {"Fn::Sub": "{{resolve:ssm:/path/to/DBUsername}}"}, "MasterUserPassword": {"Fn::Sub": "{{resolve:ssm-secure:/path/to/DBPassword}}"}, "DBName": "MyDatabase", "BackupRetentionPeriod": 7, "MultiAZ": true, "VPCSecurityGroups": [{"Fn::GetAtt": ["DBSecurityGroup", "GroupId"]}]}}, "MyDBReadReplica": {"Type": "AWS::RDS::DBInstance", "Properties": {"SourceDBInstanceIdentifier": {"Ref": "MyDBInstance"}, "DBInstanceClass": "db.m5.large", "Engine": "mysql", "VPCSecurityGroups": [{"Fn::GetAtt": ["DBSecurityGroup", "GroupId"]}]}}, "DBSecurityGroup": {"Type": "AWS::EC2::SecurityGroup", "Properties": {"GroupDescription": "Enable RDS access", "VpcId": {"Ref": "VpcId"}, "SecurityGroupIngress": [{"IpProtocol": "tcp", "FromPort": "3306", "ToPort": "3306", "CidrIp": "0.0.0.0/0"}]}}}, "Parameters": {"VpcId": {"Type": "AWS::EC2::VPC::Id", "Description": "The VPC ID to deploy the instances in"}}}