{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation Template for AWS Greengrass resources and group", "Resources": {"GreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"InitialVersion": {"CoreDefinitionVersionArn": {"Ref": "CoreDefinitionVersion"}, "DeviceDefinitionVersionArn": {"Ref": "DeviceDefinitionVersion"}, "FunctionDefinitionVersionArn": {"Ref": "FunctionDefinitionVersion"}, "LoggerDefinitionVersionArn": {"Ref": "LoggerDefinitionVersion"}, "SubscriptionDefinitionVersionArn": {"Ref": "SubscriptionDefinitionVersion"}}, "Name": "MyGreengrassGroup"}}, "CoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"InitialVersion": {"Cores": [{"Id": "CoreId", "CertificateArn": "arn:aws:iot:region:account-id:cert/certificate-id", "ThingArn": "arn:aws:iot:region:account-id:thing/thing-name", "SyncShadow": true}]}, "Name": "MyCoreDefinition"}}, "CoreDefinitionVersion": {"Type": "AWS::Greengrass::CoreDefinitionVersion", "Properties": {"CoreDefinitionId": {"Ref": "CoreDefinition"}, "Cores": [{"Id": "CoreId", "CertificateArn": "arn:aws:iot:region:account-id:cert/certificate-id", "ThingArn": "arn:aws:iot:region:account-id:thing/thing-name", "SyncShadow": true}]}}, "DeviceDefinition": {"Type": "AWS::Greengrass::DeviceDefinition", "Properties": {"InitialVersion": {"Devices": [{"Id": "DeviceId", "CertificateArn": "arn:aws:iot:region:account-id:cert/device-certificate-id", "ThingArn": "arn:aws:iot:region:account-id:thing/device-thing-name", "SyncShadow": true}]}, "Name": "MyDeviceDefinition"}}, "DeviceDefinitionVersion": {"Type": "AWS::Greengrass::DeviceDefinitionVersion", "Properties": {"DeviceDefinitionId": {"Ref": "DeviceDefinition"}, "Devices": [{"Id": "DeviceId", "CertificateArn": "arn:aws:iot:region:account-id:cert/device-certificate-id", "ThingArn": "arn:aws:iot:region:account-id:thing/device-thing-name", "SyncShadow": true}]}}, "FunctionDefinition": {"Type": "AWS::Greengrass::FunctionDefinition", "Properties": {"InitialVersion": {"Functions": [{"Id": "FunctionId", "FunctionArn": "arn:aws:lambda:region:account-id:function:function-name", "FunctionConfiguration": {"EncodingType": "json", "Environment": {"Variables": {"ENV_VARIABLE": "value"}}, "Pinned": true, "Timeout": 3}}]}, "Name": "MyFunctionDefinition"}}, "FunctionDefinitionVersion": {"Type": "AWS::Greengrass::FunctionDefinitionVersion", "Properties": {"FunctionDefinitionId": {"Ref": "FunctionDefinition"}, "Functions": [{"Id": "FunctionId", "FunctionArn": "arn:aws:lambda:region:account-id:function:function-name", "FunctionConfiguration": {"EncodingType": "json", "Environment": {"Variables": {"ENV_VARIABLE": "value"}}, "Pinned": true, "Timeout": 3}}]}}, "LoggerDefinition": {"Type": "AWS::Greengrass::LoggerDefinition", "Properties": {"InitialVersion": {"Loggers": [{"Id": "LoggerId", "Component": "GreengrassSystem", "Level": "INFO", "Type": "FileSystem", "Space": 1024}]}, "Name": "MyLoggerDefinition"}}, "LoggerDefinitionVersion": {"Type": "AWS::Greengrass::LoggerDefinitionVersion", "Properties": {"LoggerDefinitionId": {"Ref": "LoggerDefinition"}, "Loggers": [{"Id": "LoggerId", "Component": "GreengrassSystem", "Level": "INFO", "Type": "FileSystem", "Space": 1024}]}}, "SubscriptionDefinition": {"Type": "AWS::Greengrass::SubscriptionDefinition", "Properties": {"InitialVersion": {"Subscriptions": [{"Id": "SubscriptionId", "Source": "arn:aws:iot:region:account-id:thing/source-thing", "Subject": "topic", "Target": "arn:aws:iot:region:account-id:thing/target-thing"}]}, "Name": "MySubscriptionDefinition"}}, "SubscriptionDefinitionVersion": {"Type": "AWS::Greengrass::SubscriptionDefinitionVersion", "Properties": {"SubscriptionDefinitionId": {"Ref": "SubscriptionDefinition"}, "Subscriptions": [{"Id": "SubscriptionId", "Source": "arn:aws:iot:region:account-id:thing/source-thing", "Subject": "topic", "Target": "arn:aws:iot:region:account-id:thing/target-thing"}]}}}, "Outputs": {"GreengrassGroupId": {"Description": "ID of the Greengrass Group", "Value": {"Ref": "GreengrassGroup"}}}}