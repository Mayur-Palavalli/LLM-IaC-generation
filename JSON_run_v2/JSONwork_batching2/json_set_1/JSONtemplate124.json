{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template to provision AWS Neptune Graph Database with CI/CD integration through AWS CloudWatch and AWS SNS.", "Resources": {"NeptuneDBCluster": {"Type": "AWS::Neptune::DBCluster", "Properties": {"DBClusterIdentifier": "my-neptune-cluster", "Engine": "neptune", "BackupRetentionPeriod": 7, "PreferredBackupWindow": "03:00-04:00", "PreferredMaintenanceWindow": "sun:05:00-sun:06:00", "StorageEncrypted": true}}, "NeptuneDBInstance": {"Type": "AWS::Neptune::DBInstance", "Properties": {"DBInstanceClass": "db.r5.large", "DBClusterIdentifier": {"Ref": "NeptuneDBCluster"}, "AvailabilityZone": "us-west-2a"}}, "NeptuneClusterSubnetGroup": {"Type": "AWS::Neptune::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for Neptune Cluster", "SubnetIds": ["subnet-abcde123", "subnet-12345abc"]}}, "NeptuneClusterParameterGroup": {"Type": "AWS::Neptune::DBClusterParameterGroup", "Properties": {"Description": "Custom parameter group for Neptune DB Cluster", "Family": "neptune1", "Parameters": {"neptune_enable_audit_log": "1"}}}, "NeptuneInstanceParameterGroup": {"Type": "AWS::Neptune::DBParameterGroup", "Properties": {"Description": "Custom parameter group for Neptune DB Instances", "Family": "neptune1", "Parameters": {"neptune_query_timeout": "600000"}}}, "CloudWatchAlarm": {"Type": "AWS::CloudWatch::Alarm", "Properties": {"AlarmName": "NeptuneCPUUtilizationAlarm", "AlarmDescription": "Alarm for CPU Utilization of Neptune Instances", "MetricName": "CPUUtilization", "Namespace": "AWS/Neptune", "Statistic": "Average", "Period": "300", "EvaluationPeriods": "1", "Threshold": "80", "ComparisonOperator": "GreaterThanThreshold", "Dimensions": [{"Name": "DBClusterIdentifier", "Value": {"Ref": "NeptuneDBCluster"}}], "AlarmActions": [{"Ref": "SNSTopic"}]}}, "SNSTopic": {"Type": "AWS::SNS::Topic", "Properties": {"TopicName": "NeptuneAlarmsTopic"}}, "SNSTopicSubscription": {"Type": "AWS::SNS::Subscription", "Properties": {"Endpoint": "example@example.com", "Protocol": "email", "TopicArn": {"Ref": "SNSTopic"}}}}}