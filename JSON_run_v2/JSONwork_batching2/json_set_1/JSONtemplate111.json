{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"MyGreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"Name": "MyGreengrassGroup"}}, "MyGreengrassCoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "MyGreengrassCoreDefinition", "InitialVersion": {"Cores": [{"Id": "MyGreengrassCore", "CertificateArn": {"Ref": "MyCoreCertificateArn"}, "ThingArn": {"Ref": "MyGreengrassCoreThing"}, "SyncShadow": true}]}}}, "MyGreengrassLambdaFunction": {"Type": "AWS::Lambda::Function", "Properties": {"Handler": "index.handler", "Role": {"Fn::GetAtt": ["MyLambdaExecutionRole", "Arn"]}, "Code": {"S3Bucket": "my-lambda-functions", "S3Key": "my-lambda-function.zip"}, "Runtime": "python3.8", "Timeout": 300}}, "MyLambdaExecutionRole": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "lambda.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Policies": [{"PolicyName": "LambdaBasicExecution", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["logs:CreateLogGroup", "logs:CreateLogStream", "logs:PutLogEvents"], "Resource": "*"}]}}]}}, "MyCoreCertificateArn": {"Type": "AWS::IoT::Certificate", "Properties": {"Status": "ACTIVE"}}, "MyGreengrassCoreThing": {"Type": "AWS::IoT::Thing", "Properties": {"ThingName": "MyGreengrassCoreThing"}}}, "Outputs": {"GreengrassGroupID": {"Description": "The ID of the Greengrass Group", "Value": {"Ref": "MyGreengrassGroup"}}, "GreengrassCoreDefinitionID": {"Description": "The ID of the Greengrass Core Definition", "Value": {"Ref": "MyGreengrassCoreDefinition"}}, "GreengrassLambdaFunctionArn": {"Description": "The ARN of the lambda function for Greengrass", "Value": {"Fn::GetAtt": ["MyGreengrassLambdaFunction", "Arn"]}}}}