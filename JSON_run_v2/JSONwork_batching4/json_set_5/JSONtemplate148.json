{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation Template for a Static Website using S3 and CloudFront", "Resources": {"WebsiteBucket": {"Type": "AWS::S3::Bucket", "Properties": {"BucketName": {"Fn::Sub": "${AWS::StackName}-website-bucket"}, "WebsiteConfiguration": {"IndexDocument": "index.html", "ErrorDocument": "error.html"}, "OwnershipControls": {"Rules": [{"ObjectOwnership": "BucketOwnerPreferred"}]}}}, "S3BucketPolicy": {"Type": "AWS::S3::BucketPolicy", "Properties": {"Bucket": {"Ref": "WebsiteBucket"}, "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": "*", "Action": "s3:GetObject", "Resource": {"Fn::Join": ["", ["arn:aws:s3:::", {"Ref": "WebsiteBucket"}, "/*"]]}}]}}}, "CloudFrontOriginAccessIdentity": {"Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity", "Properties": {"CloudFrontOriginAccessIdentityConfig": {"Comment": {"Fn::Sub": "${AWS::StackName} OAI for S3 website bucket"}}}}, "WebsiteCloudFrontDistribution": {"Type": "AWS::CloudFront::Distribution", "Properties": {"DistributionConfig": {"Origins": [{"DomainName": {"Fn::GetAtt": ["WebsiteBucket", "RegionalDomainName"]}, "Id": {"Fn::Sub": "${AWS::StackName}-WebsiteBucketOrigin"}, "S3OriginConfig": {"OriginAccessIdentity": {"Fn::Sub": "origin-access-identity/cloudfront/${CloudFrontOriginAccessIdentity.CloudFrontOriginAccessIdentity}"}}}], "Enabled": true, "DefaultRootObject": "index.html", "DefaultCacheBehavior": {"TargetOriginId": {"Fn::Sub": "${AWS::StackName}-WebsiteBucketOrigin"}, "ViewerProtocolPolicy": "redirect-to-https", "AllowedMethods": ["HEAD", "GET"], "CachedMethods": ["HEAD", "GET"], "ForwardedValues": {"QueryString": false, "Cookies": {"Forward": "none"}}, "MinTTL": 0, "DefaultTTL": 86400, "MaxTTL": 31536000}, "ViewerCertificate": {"CloudFrontDefaultCertificate": true}}}}}, "Outputs": {"WebsiteURL": {"Description": "URL for the website", "Value": {"Fn::GetAtt": ["WebsiteCloudFrontDistribution", "DomainName"]}}}}