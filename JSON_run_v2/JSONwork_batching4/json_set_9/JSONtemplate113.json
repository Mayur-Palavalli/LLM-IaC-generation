{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"MyGreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"InitialVersion": {"CoreDefinitionVersionArn": {"Fn::GetAtt": ["MyCoreDefinition", "LatestVersionArn"]}, "DeviceDefinitionVersionArn": {"Fn::GetAtt": ["MyDeviceDefinition", "LatestVersionArn"]}, "FunctionDefinitionVersionArn": {"Fn::GetAtt": ["MyFunctionDefinition", "LatestVersionArn"]}, "SubscriptionDefinitionVersionArn": {"Fn::GetAtt": ["MySubscriptionDefinition", "LatestVersionArn"]}}, "Name": "MyGreengrassGroup"}}, "MyCoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"InitialVersion": {"Cores": [{"Id": "MyCore", "CertificateArn": {"Ref": "MyGreengrassCoreCertificate"}, "SyncShadow": true, "ThingArn": {"Ref": "MyGreengrassCoreThing"}}]}, "Name": "MyCoreDefinition"}}, "MyDeviceDefinition": {"Type": "AWS::Greengrass::DeviceDefinition", "Properties": {"Name": "MyDeviceDefinition", "InitialVersion": {"Devices": [{"Id": "MyDevice", "CertificateArn": "arn:aws:iot:region:account-id:cert/MyDeviceCertificate", "ThingArn": "arn:aws:iot:region:account-id:thing/MyDeviceThing", "SyncShadow": true}]}}}, "MyFunctionDefinition": {"Type": "AWS::Greengrass::FunctionDefinition", "Properties": {"Name": "MyFunctionDefinition", "InitialVersion": {"Functions": [{"Id": "MyFunction", "FunctionArn": "arn:aws:lambda:region:account-id:function:MyFunction", "FunctionConfiguration": {"MemorySize": 128000, "Pinned": true, "Timeout": 300}}]}}}, "MySubscriptionDefinition": {"Type": "AWS::Greengrass::SubscriptionDefinition", "Properties": {"Name": "MySubscriptionDefinition", "InitialVersion": {"Subscriptions": [{"Id": "MySubscription", "Source": {"Ref": "MyGreengrassCoreThing"}, "Subject": "some/topic", "Target": "arn:aws:iot:region:account-id:thing/MyTargetThing"}]}}}, "MyGreengrassCoreThing": {"Type": "AWS::IoT::Thing", "Properties": {"ThingName": "MyGreengrassCoreThing"}}, "MyGreengrassCoreCertificate": {"Type": "AWS::IoT::Certificate", "Properties": {"Status": "ACTIVE"}}}, "Outputs": {"GroupArn": {"Description": "The Amazon Resource Name (ARN) of the Greengrass Group", "Value": {"Ref": "MyGreengrassGroup"}}}}