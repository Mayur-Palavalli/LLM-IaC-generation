{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for creating AWS Greengrass resources and group with supporting AWS services.", "Resources": {"GreengrassCoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "MyGreengrassCoreDefinition"}}, "GreengrassCoreDefinitionVersion": {"Type": "AWS::Greengrass::CoreDefinitionVersion", "Properties": {"CoreDefinitionId": {"Ref": "GreengrassCoreDefinition"}, "Cores": [{"Id": "Core1", "CertificateArn": "arn:aws:iot:region:account-id:cert/certificate-id", "ThingArn": {"Ref": "GreengrassCoreThing"}, "SyncShadow": true}]}}, "GreengrassGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"Name": "MyGreengrassGroup"}}, "GreengrassGroupVersion": {"Type": "AWS::Greengrass::GroupVersion", "Properties": {"GroupId": {"Ref": "GreengrassGroup"}, "CoreDefinitionVersionId": {"Ref": "GreengrassCoreDefinitionVersion"}}}, "GreengrassCoreThing": {"Type": "AWS::IoT::Thing", "Properties": {"ThingName": "MyGreengrassCoreThing"}}, "GreengrassRole": {"Type": "AWS::IAM::Role", "Properties": {"RoleName": "GreengrassRole", "AssumeRolePolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Principal": {"Service": "greengrass.amazonaws.com"}, "Action": "sts:AssumeRole"}]}, "Policies": [{"PolicyName": "GreengrassPolicy", "PolicyDocument": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["iot:*", "greengrass:*"], "Resource": "*"}]}}]}}}, "Outputs": {"GreengrassCoreDefinitionId": {"Value": {"Ref": "GreengrassCoreDefinition"}}, "GreengrassGroupId": {"Value": {"Ref": "GreengrassGroup"}}}}