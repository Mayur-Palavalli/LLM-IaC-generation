{"AWSTemplateFormatVersion": "2010-09-09", "Description": "Highly-Available RDS DBInstance with Read Replica", "Resources": {"MyDBSubnetGroup": {"Type": "AWS::RDS::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for RDS DBInstance", "SubnetIds": [{"Ref": "Subnet1"}, {"Ref": "Subnet2"}]}}, "MyDBInstance": {"Type": "AWS::RDS::DBInstance", "Properties": {"AllocatedStorage": "20", "DBInstanceClass": "db.t3.medium", "Engine": "mysql", "MasterUsername": "admin", "MasterUserPassword": {"Fn::Sub": "{{resolve:ssm-secure:/myapp/db/masterpassword}}"}, "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "VPCSecurityGroups": [{"Ref": "MyDBSecurityGroup"}], "MultiAZ": true}}, "MyDBInstanceReadReplica": {"Type": "AWS::RDS::DBInstance", "Properties": {"SourceDBInstanceIdentifier": {"Ref": "MyDBInstance"}, "DBInstanceClass": "db.t3.medium", "Engine": "mysql", "DBSubnetGroupName": {"Ref": "MyDBSubnetGroup"}, "VPCSecurityGroups": [{"Ref": "MyDBSecurityGroup"}]}}, "MyDBSecurityGroup": {"Type": "AWS::EC2::SecurityGroup", "Properties": {"GroupDescription": "RDS security group", "VpcId": {"Ref": "VpcId"}, "SecurityGroupIngress": [{"IpProtocol": "tcp", "FromPort": "3306", "ToPort": "3306", "CidrIp": "0.0.0.0/0"}]}}}, "Parameters": {"VpcId": {"Type": "AWS::EC2::VPC::Id", "Description": "VPC Id"}, "Subnet1": {"Type": "AWS::EC2::Subnet::Id", "Description": "Subnet ID for the first availability zone"}, "Subnet2": {"Type": "AWS::EC2::Subnet::Id", "Description": "Subnet ID for the second availability zone"}}}