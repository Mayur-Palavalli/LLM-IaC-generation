{"AWSTemplateFormatVersion": "2010-09-09", "Description": "AWS CloudFormation template for AWS Greengrass Group and resources", "Resources": {"GGCoreDefinition": {"Type": "AWS::Greengrass::CoreDefinition", "Properties": {"Name": "MyCoreDefinition", "InitialVersion": {"Cores": [{"Id": "MyCoreId", "CertificateArn": "arn:aws:iot:region:account-id:cert/certificate-id", "ThingArn": "arn:aws:iot:region:account-id:thing/MyGreengrassCore"}]}}}, "GGDeviceDefinition": {"Type": "AWS::Greengrass::DeviceDefinition", "Properties": {"Name": "MyDeviceDefinition", "InitialVersion": {"Devices": [{"Id": "MyDeviceId", "CertificateArn": "arn:aws:iot:region:account-id:cert/device-certificate-id", "ThingArn": "arn:aws:iot:region:account-id:thing/MyGreengrassDevice", "SyncShadow": true}]}}}, "GGFunctionDefinition": {"Type": "AWS::Greengrass::FunctionDefinition", "Properties": {"Name": "MyFunctionDefinition", "InitialVersion": {"Functions": [{"Id": "MyFunctionId", "FunctionArn": "arn:aws:lambda:region:account-id:function:MyGreengrassFunction", "FunctionConfiguration": {"EncodingType": "json", "Environment": {"Variables": {}}, "MemorySize": 128000, "Pinned": true, "Timeout": 3}}]}}}, "GGResourceDefinition": {"Type": "AWS::Greengrass::ResourceDefinition", "Properties": {"Name": "MyResourceDefinition", "InitialVersion": {"Resources": [{"Id": "MyResourceId", "Name": "MyLocalResource", "ResourceDataContainer": {"LocalDeviceResourceData": {"SourcePath": "/dev/sda1", "GroupOwnerSetting": {"AutoAddGroupOwner": true}}}}]}}}, "GGSubscriptionDefinition": {"Type": "AWS::Greengrass::SubscriptionDefinition", "Properties": {"Name": "MySubscriptionDefinition", "InitialVersion": {"Subscriptions": [{"Id": "MySubscriptionId", "Source": "arn:aws:iot:region:account-id:thing/MyGreengrassCore", "Subject": "some/topic", "Target": "arn:aws:lambda:region:account-id:function:MyGreengrassFunction"}]}}}, "GGGroup": {"Type": "AWS::Greengrass::Group", "Properties": {"Name": "MyGreengrassGroup", "InitialVersion": {"CoreDefinitionVersionArn": {"Fn::GetAtt": ["GGCoreDefinition", "LatestVersionArn"]}, "DeviceDefinitionVersionArn": {"Fn::GetAtt": ["GGDeviceDefinition", "LatestVersionArn"]}, "FunctionDefinitionVersionArn": {"Fn::GetAtt": ["GGFunctionDefinition", "LatestVersionArn"]}, "ResourceDefinitionVersionArn": {"Fn::GetAtt": ["GGResourceDefinition", "LatestVersionArn"]}, "SubscriptionDefinitionVersionArn": {"Fn::GetAtt": ["GGSubscriptionDefinition", "LatestVersionArn"]}}}}}}