{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"DynamoDBTables": {"Type": "AWS::CloudFormation::Macro", "Properties": {"ServiceToken": {"Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:MacroFunctionName"}, "Parameters": {"tables": [{"TableName": "Table1", "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}, {"TableName": "Table2", "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}, {"TableName": "Table3", "AttributeDefinitions": [{"AttributeName": "Id", "AttributeType": "S"}], "KeySchema": [{"AttributeName": "Id", "KeyType": "HASH"}], "ProvisionedThroughput": {"ReadCapacityUnits": 5, "WriteCapacityUnits": 5}}]}, "Fn::ForEach": {"Identifier": "tables", "Target": {"Template": {"DynamoDBTable": {"Type": "AWS::DynamoDB::Table", "Properties": {"TableName": {"Fn::Sub": "${tables.TableName}"}, "AttributeDefinitions": {"Fn::Sub": "${tables.AttributeDefinitions}"}, "KeySchema": {"Fn::Sub": "${tables.KeySchema}"}, "ProvisionedThroughput": {"Fn::Sub": "${tables.ProvisionedThroughput}"}}}}}}}}}}