{"AWSTemplateFormatVersion": "2010-09-09", "Resources": {"NeptuneDBCluster": {"Type": "AWS::Neptune::DBCluster", "Properties": {"AvailabilityZones": {"Fn::GetAZs": ""}, "BackupRetentionPeriod": 7, "DBClusterIdentifier": "neptune-cluster", "Engine": "neptune", "Port": 8182, "StorageEncrypted": true}}, "NeptuneDBInstance": {"Type": "AWS::Neptune::DBInstance", "Properties": {"DBInstanceClass": "db.r5.large", "DBClusterIdentifier": {"Ref": "NeptuneDBCluster"}, "DBInstanceIdentifier": "neptune-instance"}}, "NeptuneDBClusterParameterGroup": {"Type": "AWS::Neptune::DBClusterParameterGroup", "Properties": {"Description": "Neptune cluster parameter group", "Family": "neptune1", "Parameters": {"neptune_enable_audit_log": "1"}}}, "NeptuneDBSubnetGroup": {"Type": "AWS::Neptune::DBSubnetGroup", "Properties": {"DBSubnetGroupDescription": "Subnet group for Neptune cluster", "SubnetIds": ["subnet-12345678", "subnet-23456789", "subnet-34567890"]}}, "CICDPipeline": {"Type": "AWS::CodePipeline::Pipeline", "Properties": {"RoleArn": "arn:aws:iam::123456789012:role/AWSCloudFormationRole", "Stages": [{"Name": "Source", "Actions": [{"Name": "SourceAction", "ActionTypeId": {"Category": "Source", "Owner": "AWS", "Provider": "CodeCommit", "Version": "1"}, "OutputArtifacts": [{"Name": "sourceOutput"}], "Configuration": {"BranchName": "main", "RepositoryName": "my-repo"}}]}, {"Name": "Build", "Actions": [{"Name": "BuildAction", "ActionTypeId": {"Category": "Build", "Owner": "AWS", "Provider": "CodeBuild", "Version": "1"}, "InputArtifacts": [{"Name": "sourceOutput"}], "OutputArtifacts": [{"Name": "buildOutput"}], "Configuration": {"ProjectName": "my-build-project"}}]}], "ArtifactStore": {"Type": "S3", "Location": "my-artifact-bucket"}}}, "CloudWatchAlarm": {"Type": "AWS::CloudWatch::Alarm", "Properties": {"AlarmDescription": "Alarm for Neptune CPU Utilization", "MetricName": "CPUUtilization", "Namespace": "AWS/Neptune", "Statistic": "Average", "Period": 300, "EvaluationPeriods": 1, "Threshold": 80, "ComparisonOperator": "GreaterThanThreshold", "AlarmActions": [{"Ref": "SnsTopic"}], "Dimensions": [{"Name": "DBClusterIdentifier", "Value": {"Ref": "NeptuneDBCluster"}}]}}, "SnsTopic": {"Type": "AWS::SNS::Topic", "Properties": {"TopicName": "neptune-alerts"}}, "SnsTopicSubscription": {"Type": "AWS::SNS::Subscription", "Properties": {"TopicArn": {"Ref": "SnsTopic"}, "Protocol": "email", "Endpoint": "example@example.com"}}}, "Outputs": {"NeptuneDBClusterEndpoint": {"Description": "Endpoint of the Neptune DB Cluster", "Value": {"Fn::GetAtt": ["NeptuneDBCluster", "Endpoint"]}}, "NeptuneDBClusterReadEndpoint": {"Description": "Read endpoint of the Neptune DB Cluster", "Value": {"Fn::GetAtt": ["NeptuneDBCluster", "ReadEndpoint"]}}}}